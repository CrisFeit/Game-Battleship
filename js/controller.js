!function s(i,o,r){function d(n,e){if(!o[n]){if(!i[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(l)return l(n,!0);throw new Error("Cannot find module '"+n+"'")}var a=o[n]={exports:{}};i[n][0].call(a.exports,function(e){var t=i[n][1][e];return d(t||e)},a,a.exports,s,i,o,r)}return o[n].exports}for(var l="function"==typeof require&&require,e=0;e<r.length;e++)d(r[e]);return d}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=a(e("./view.js")),o=a(e("./model.js"));function a(e){return e&&e.__esModule?e:{default:e}}var l={input:document.getElementById("guessInput"),fireButton:document.getElementById("fireButton"),btnStart:document.getElementById("start"),btnStop:document.getElementById("stop"),btnRank:document.getElementById("rank"),btnSave:document.getElementById("save-score"),inputName:document.getElementById("rank-name"),form:document.getElementById("rank-form"),keyPress:function(){this.input.addEventListener("input",function(e){return function(e,t,n){var a,s=n.keyCode;1<e.value.length?(a=e.value.replace(/[^a-g][^0-6]+/g,"").toUpperCase(),e.value=a,l.fireReady(a)):(a=e.value.replace(/[^a-g]+/g,"").toUpperCase(),l.abort(),e.value=a);var i=0,o="",r=a.length;{if(8==s)return!0;for(var d=0;d<=r;d++)"-"==t.charAt(d)||"."==t.charAt(d)||"/"==t.charAt(d)||"("==t.charAt(d)||")"==t.charAt(d)||" "==t.charAt(d)?(o+=t.charAt(d),r++):(o+=a.charAt(i),i++);return e.value=o,!0}}(this,"00",e)})},fireReady:function(e){if(e){var t=document.getElementById(e);if(t.classList.contains("hit")||t.classList.contains("miss"))i.default.displayMessage("Marked Field"),l.abort(fireEnter);else{var n=function(e){13===e.keyCode&&fireButton.click()};fireButton.disabled=!1,fireButton.classList.add("is--enabled"),l.input.addEventListener("keypress",n),fireButton.onclick=function(){var e=l.input.value;t=document.getElementById(e),o.default.fire(e,t),l.abort(n)}}return!1}},abort:function(e){fireButton.disabled=!0,fireButton.classList.remove("is--enabled"),l.input.removeEventListener("keypress",e),l.input.value="",l.input.focus()},addRank:function(){l.form.classList.add("fade-in"),l.btnSave.disabled=!1,l.inputName.disabled=!1,l.inputName.addEventListener("focusin",function(){l.inputName.classList.remove("is-invalid")}),l.form.addEventListener("submit",function(e){e.preventDefault();var a=o.default.getScore.score().total,s=l.inputName.value;if(console.log("Without trim"+s),console.log("Input "+s.trim().toUpperCase()),!(0==s.length||20<s.length))return 800<a||!o.default.init?(s="Invalid Score",l.inputName.classList.add("is-invalid"),void setTimeout(function(){i.default.stop()},5e3)):void db.collection("rank").get().then(function(e){for(var t=e.docs,n=0;n<t.length;n++){if(t[n].data().name.toUpperCase()==s.trim().toUpperCase()&&t[n].data().score>=a)return console.log("data Name :"+t[n].data().name.toUpperCase()),s="Can't be done",void l.inputName.classList.add("is-invalid");if(t[n].data().name.toUpperCase()==s.trim().toUpperCase()&&t[n].data().score<a)return db.collection("rank").doc(t[n].data().id).update({score:a}),l.form.classList.remove("fade-in"),void setTimeout(function(){l.form.remove(),i.default.renderRank()},2e3);n+1===t.length&&(db.collection("rank").add({name:s,score:a}),l.form.classList.remove("fade-in"),setTimeout(function(){l.form.remove(),i.default.renderRank()},2e3))}});l.inputName.classList.add("is-invalid")})}},s=l;n.default=s},{"./model.js":3,"./view.js":4}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=a(e("./view.js")),o=a(e("./model.js"));function a(e){return e&&e.__esModule?e:{default:e}}var l={input:document.getElementById("guessInput"),fireButton:document.getElementById("fireButton"),btnStart:document.getElementById("start"),btnStop:document.getElementById("stop"),btnRank:document.getElementById("rank"),btnSave:document.getElementById("save-score"),inputName:document.getElementById("rank-name"),form:document.getElementById("rank-form"),keyPress:function(){this.input.addEventListener("input",function(e){return function(e,t,n){var a,s=n.keyCode;1<e.value.length?(a=e.value.replace(/[^a-g][^0-6]+/g,"").toUpperCase(),e.value=a,l.fireReady(a)):(a=e.value.replace(/[^a-g]+/g,"").toUpperCase(),l.abort(),e.value=a);var i=0,o="",r=a.length;{if(8==s)return!0;for(var d=0;d<=r;d++)"-"==t.charAt(d)||"."==t.charAt(d)||"/"==t.charAt(d)||"("==t.charAt(d)||")"==t.charAt(d)||" "==t.charAt(d)?(o+=t.charAt(d),r++):(o+=a.charAt(i),i++);return e.value=o,!0}}(this,"00",e)})},fireReady:function(e){if(e){var t=document.getElementById(e);if(t.classList.contains("hit")||t.classList.contains("miss"))i.default.displayMessage("Marked Field"),l.abort(fireEnter);else{var n=function(e){13===e.keyCode&&fireButton.click()};fireButton.disabled=!1,fireButton.classList.add("is--enabled"),l.input.addEventListener("keypress",n),fireButton.onclick=function(){var e=l.input.value;t=document.getElementById(e),o.default.fire(e,t),l.abort(n)}}return!1}},abort:function(e){fireButton.disabled=!0,fireButton.classList.remove("is--enabled"),l.input.removeEventListener("keypress",e),l.input.value="",l.input.focus()},addRank:function(){l.form.classList.add("fade-in"),l.btnSave.disabled=!1,l.inputName.disabled=!1,l.inputName.addEventListener("focusin",function(){l.inputName.classList.remove("is-invalid")}),l.form.addEventListener("submit",function(e){e.preventDefault();var a=o.default.getScore.score().total,s=l.inputName.value;if(console.log("Without trim"+s),console.log("Input "+s.trim().toUpperCase()),!(0==s.length||20<s.length))return 800<a||!o.default.init?(s="Invalid Score",l.inputName.classList.add("is-invalid"),void setTimeout(function(){i.default.stop()},5e3)):void db.collection("rank").get().then(function(e){for(var t=e.docs,n=0;n<t.length;n++){if(t[n].data().name.toUpperCase()==s.trim().toUpperCase()&&t[n].data().score>=a)return console.log("data Name :"+t[n].data().name.toUpperCase()),s="Can't be done",void l.inputName.classList.add("is-invalid");if(t[n].data().name.toUpperCase()==s.trim().toUpperCase()&&t[n].data().score<a)return db.collection("rank").doc(t[n].data().id).update({score:a}),l.form.classList.remove("fade-in"),void setTimeout(function(){l.form.remove(),i.default.renderRank()},2e3);n+1===t.length&&(db.collection("rank").add({name:s,score:a}),l.form.classList.remove("fade-in"),setTimeout(function(){l.form.remove(),i.default.renderRank()},2e3))}});l.inputName.classList.add("is-invalid")})}},s=l;n.default=s},{"./model.js":3,"./view.js":4}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=(a=e("./view.js"))&&a.__esModule?a:{default:a};var d={square:document.querySelectorAll(".grid div"),ships:[{id:"ManoWar",cordsY:0,cordsX:0,res:3},{id:"Destroyer",cordsY:0,cordsX:0,res:2},{id:"Silence",cordsY:0,cordsX:0,res:2}],init:!1,fire:function(s,i){function o(e,t){return!i.classList.contains("hit")&&!i.classList.contains("miss")&&(e.res--,0===e.res?(e.sank=!0,r.default.damage(t,"sunk"),r.default.displayMessage("You sank the battleship "+e.id)):(r.default.damage(t,"hit"),r.default.displayMessage(" The "+e.id+" has been hit !  ")),r.default.displayHit(s),d.isSunk()&&(r.default.displayMessage(" Congratulations! You sank all battleships "),setTimeout(function(){r.default.displayEndMessage("Mission Complete"),r.default.finish(),r.default.end(d.getScore.score())},3e3)),!0)}!function(){for(var e=radar.getElementsByClassName(s)[0],t=e.offsetTop+e.offsetHeight/2,n=e.offsetLeft+e.offsetWidth/2,a=0;a<d.ships.length;a++)d.ships[a].cordsY=r.default.navios[a].offsetTop+r.default.navios[a].offsetHeight/2,d.ships[a].cordsX=r.default.navios[a].offsetLeft+r.default.navios[a].offsetWidth/2,d.ships[a].cordsY-20<t&&t<d.ships[a].cordsY+20&&d.ships[a].cordsX-20<n&&n<d.ships[a].cordsX+20&&o(d.ships[a],r.default.navios[a]);!void(i.classList.contains("miss")||i.classList.contains("hit")||(r.default.displayMiss(s),r.default.displayMessage("You missed.")))}()},isSunk:function(){for(var e=0;e<d.ships.length;e++)if(!d.ships[e].sank)return!1;return!0},getScore:{score:function(){var t={shotsHit:0,shotsMiss:0,shipsSunk:0,time:0,total:0};if(!d.init)return!1;var e=document.getElementById("min").firstChild.data,n=document.getElementById("sec").firstChild.data;return t.time=60*parseFloat(e)+parseFloat(n),d.square.forEach(function(e){e.classList.contains("hit")?t.shotsHit++:e.classList.contains("miss")&&t.shotsMiss++}),d.ships.forEach(function(e){0===e.res&&t.shipsSunk++}),t.total=t.time+25*t.shotsHit+70*t.shipsSunk-10*t.shotsMiss,t}}},s=d;n.default=s},{"./view.js":4}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=i(e("./model.js")),s=i(e("./controller.js"));function i(e){return e&&e.__esModule?e:{default:e}}var o={navios:document.querySelectorAll(".ships"),message:document.getElementById("messageArea"),messageEnd:document.getElementById("messageEnd"),antena:document.querySelector(".antena"),mapa:document.getElementById("radar"),cronometro:document.getElementById("countDown"),interval:null,points:document.querySelectorAll(".point-list-item span"),overlay:document.getElementById("overlay"),modal:document.getElementById("modal"),list:document.getElementsByClassName("point-list-item"),rankWrap:document.getElementById("rank-wrap"),rankList:document.getElementById("rank-list"),start:function(){var e=this;a.default.init=!0,this.mapa.classList.add("radar-map"),s.default.btnStart.classList.add("is-active"),s.default.btnStart.disabled=!0,s.default.btnRank.disabled=!0,s.default.input.disabled=!1,s.default.input.focus(),this.countDown(),setTimeout(function(){e.antena.classList.remove("hidden"),s.default.btnStop.disabled=!1},5e3)},stop:function(){window.location.reload()},finish:function(){clearInterval(o.interval),o.mapa.querySelector(".antena").style.animationPlayState="paused",o.cronometro.style.animationPlayState="paused",s.default.btnStart.classList.remove("is-active"),s.default.input.disabled=!0,s.default.btnStop.disabled=!0,o.navios.forEach(function(e){e.style.animationPlayState="paused"}),o.cronometro.classList.remove("is--time-over"),o.end(a.default.getScore.score())},generateShips:function(){var e=function(e){for(var t=[],n=0;n<=e;n++)t.push(n);return t.sort(function(e,t){return Math.round(2*Math.random())-1}),t.splice(0,e+1)}(2);o.navios[e[0]].style.animationDirection="alternate-reverse";var t=0,n=setInterval(function(){o.navios[e[t]].classList.remove("hidden"),++t===o.navios.length&&clearInterval(n)},7e3)},displayMessage:function(e){this.message.textContent=e},displayHit:function(e){document.getElementById(e).classList.add("hit")},displayMiss:function(e){document.getElementById(e).classList.add("miss")},displayEndMessage:function(e){this.messageEnd.textContent=e},damage:function(e,t){"hit"===t&&(e.classList.add("hitted"),setTimeout(function(){e.classList.remove("hitted")},3e3)),"sunk"===t&&e.classList.add("sunk")},countDown:function(){var e,t,n=this;e=30,t=2,o.interval=setInterval(function(){0==e&&(t--,e=60),document.getElementById("min").textContent=t<10?"0"+t:t,e--,document.getElementById("sec").textContent=e<10?"0"+e:e,0==t&&0==e&&(o.finish(),o.displayEndMessage("Mission is Over"))},1e3),setTimeout(function(){n.cronometro.style.display="block"},6e4),setTimeout(function(){n.cronometro.classList.add("is--time-over")},12e4)},end:function(n){o.overlay.classList.add("display"),o.points.forEach(function(e){for(var t in n)e.getAttribute("id")==t&&(e.textContent=n[t])}),setTimeout(function(){o.modal.classList.add("display")},2e3),setTimeout(function(){var e=0,t=setInterval(function(){o.list[e].classList.add("display"),++e===o.list.length&&clearInterval(t)},2e3)},3e3),setTimeout(function(){s.default.btnStop.disabled=!1,s.default.btnStop.style.zIndex="9",s.default.btnRank.disabled=!1,s.default.addRank()},16e3)},rank:function(){o.modal.classList.contains("display")||o.overlay.classList.toggle("display"),o.rankWrap.classList.toggle("show-rank")},renderRank:function(){o.rankList.innerHTML="",db.collection("rank").orderBy("score","desc").get().then(function(e){e.docs.forEach(function(e){var t=document.createElement("li"),n=document.createElement("strong"),a=document.createElement("span");t.setAttribute("data-id",e.id),n.textContent=e.data().name,a.textContent=e.data().score,n.appendChild(a),t.appendChild(n),o.rankList.appendChild(t)})})}},r=o;n.default=r},{"./controller.js":1,"./model.js":3}]},{},[2]);