!function i(a,o,d){function r(s,e){if(!o[s]){if(!a[s]){var t="function"==typeof require&&require;if(!e&&t)return t(s,!0);if(l)return l(s,!0);throw new Error("Cannot find module '"+s+"'")}var n=o[s]={exports:{}};a[s][0].call(n.exports,function(e){var t=a[s][1][e];return r(t||e)},n,n.exports,i,a,o,d)}return o[s].exports}for(var l="function"==typeof require&&require,e=0;e<d.length;e++)r(d[e]);return r}({1:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=n(e("./view.js")),o=n(e("./model.js"));function n(e){return e&&e.__esModule?e:{default:e}}var l={input:document.getElementById("guessInput"),fireButton:document.getElementById("fireButton"),btnStart:document.getElementById("start"),btnStop:document.getElementById("stop"),btnRank:document.getElementById("rank"),rankTitle:document.getElementById("rank-title"),btnSave:document.getElementById("save-score"),inputName:document.getElementById("rank-name"),form:document.getElementById("rank-form"),grid:document.getElementById("grid"),keyPress:function(){this.input.addEventListener("input",function(e){return function(e,t,s){var n,i=s.keyCode;1<e.value.length?(n=e.value.replace(/[^a-g][^0-6]+/g,"").toUpperCase(),e.value=n,l.fireReady(n)):(n=e.value.replace(/[^a-g]+/g,"").toUpperCase(),l.abort(),e.value=n);var a=0,o="",d=n.length;{if(8==i)return!0;for(var r=0;r<=d;r++)"-"==t.charAt(r)||"."==t.charAt(r)||"/"==t.charAt(r)||"("==t.charAt(r)||")"==t.charAt(r)||" "==t.charAt(r)?(o+=t.charAt(r),d++):(o+=n.charAt(a),a++);return e.value=o,!0}}(this,"00",e)}),this.grid.addEventListener("touchend",function(e){var t=e.target.getAttribute("id");o.default.fire(t,e.target)})},fireReady:function(e){if(e){var t=document.getElementById(e);if(t.classList.contains("hit")||t.classList.contains("miss"))a.default.displayMessage("Marked Field"),l.abort(fireEnter);else{var s=function(e){13===e.keyCode&&fireButton.click()};fireButton.disabled=!1,fireButton.classList.add("is--enabled"),l.input.addEventListener("keypress",s),fireButton.onclick=function(){var e=l.input.value;t=document.getElementById(e),o.default.fire(e,t),l.abort(s)}}return!1}},abort:function(e){fireButton.disabled=!0,fireButton.classList.remove("is--enabled"),l.input.removeEventListener("keypress",e),l.input.value="",l.input.focus()},addRank:function(){l.form.classList.add("fade-in"),l.btnSave.disabled=!1,l.inputName.disabled=!1,l.inputName.addEventListener("focusin",function(){l.inputName.classList.remove("is-invalid")}),l.form.addEventListener("submit",function(e){e.preventDefault();var n=o.default.getScore.score().total,i=l.inputName.value;if(console.log("Without trim"+i),console.log("Input "+i.trim().toUpperCase()),!(0==i.length||20<i.length))return 800<n||!o.default.init?(i="Invalid Score",l.inputName.classList.add("is-invalid"),void setTimeout(function(){a.default.stop()},5e3)):void db.collection("rank").get().then(function(e){for(var t=e.docs,s=0;s<t.length;s++){if(t[s].data().name.toUpperCase()==i.trim().toUpperCase()&&t[s].data().score>=n)return console.log("data Name :"+t[s].data().name.toUpperCase()),i="Can't be done",void l.inputName.classList.add("is-invalid");if(t[s].data().name.toUpperCase()==i.trim().toUpperCase()&&t[s].data().score<n)return db.collection("rank").doc(t[s].id).update({score:n}),l.form.classList.remove("fade-in"),void setTimeout(function(){l.form.remove(),a.default.renderRank()},2e3);if(s+1===t.length)return db.collection("rank").add({name:i,score:n}),l.form.classList.remove("fade-in"),void setTimeout(function(){l.form.remove(),a.default.renderRank()},2e3)}});l.inputName.classList.add("is-invalid")})}},i=l;s.default=i},{"./model.js":3,"./view.js":4}],2:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var n,d=(n=e("./view.js"))&&n.__esModule?n:{default:n};var r={square:document.querySelectorAll(".grid div"),size:document.getElementById("radar-grid").firstElementChild.offsetWidth/2.5,ships:[{id:"ManoWar",cordsY:0,cordsX:0,res:3},{id:"Destroyer",cordsY:0,cordsX:0,res:2},{id:"Silence",cordsY:0,cordsX:0,res:2}],init:!1,fire:function(i,a){function o(e,t){return!a.classList.contains("hit")&&!a.classList.contains("miss")&&(e.res--,0===e.res?(e.sank=!0,d.default.damage(t,"sunk"),d.default.displayMessage("You sank the battleship "+e.id)):(d.default.damage(t,"hit"),d.default.displayMessage(" The "+e.id+" has been hit !  ")),d.default.displayHit(i),r.isSunk()&&(d.default.displayMessage(" Congratulations! You sank all battleships "),setTimeout(function(){d.default.displayEndMessage("Mission Complete"),d.default.finish(),d.default.end(r.getScore.score())},3e3)),!0)}!function(){var e=radar.getElementsByClassName(i)[0],t=e.offsetTop+e.offsetHeight/2,s=e.offsetLeft+e.offsetWidth/2;console.log(r.size);for(var n=0;n<r.ships.length;n++)r.ships[n].cordsY=d.default.navios[n].offsetTop+d.default.navios[n].offsetHeight/2,r.ships[n].cordsX=d.default.navios[n].offsetLeft+d.default.navios[n].offsetWidth/2,r.ships[n].cordsY-r.size<t&&t<r.ships[n].cordsY+r.size&&r.ships[n].cordsX-r.size<s&&s<r.ships[n].cordsX+r.size&&o(r.ships[n],d.default.navios[n]);!void(a.classList.contains("miss")||a.classList.contains("hit")||(d.default.displayMiss(i),d.default.displayMessage("You missed.")))}()},isSunk:function(){for(var e=0;e<r.ships.length;e++)if(!r.ships[e].sank)return!1;return!0},getScore:{score:function(){var t={shotsHit:0,shotsMiss:0,shipsSunk:0,time:0,total:0};if(!r.init)return!1;var e=document.getElementById("min").firstChild.data,s=document.getElementById("sec").firstChild.data;return t.time=60*parseFloat(e)+parseFloat(s),r.square.forEach(function(e){e.classList.contains("hit")?t.shotsHit++:e.classList.contains("miss")&&t.shotsMiss++}),r.ships.forEach(function(e){0===e.res&&t.shipsSunk++}),t.total=t.time+25*t.shotsHit+70*t.shipsSunk-10*t.shotsMiss,t}}},i=r;s.default=i},{"./view.js":4}],3:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var n,d=(n=e("./view.js"))&&n.__esModule?n:{default:n};var r={square:document.querySelectorAll(".grid div"),size:document.getElementById("radar-grid").firstElementChild.offsetWidth/2.5,ships:[{id:"ManoWar",cordsY:0,cordsX:0,res:3},{id:"Destroyer",cordsY:0,cordsX:0,res:2},{id:"Silence",cordsY:0,cordsX:0,res:2}],init:!1,fire:function(i,a){function o(e,t){return!a.classList.contains("hit")&&!a.classList.contains("miss")&&(e.res--,0===e.res?(e.sank=!0,d.default.damage(t,"sunk"),d.default.displayMessage("You sank the battleship "+e.id)):(d.default.damage(t,"hit"),d.default.displayMessage(" The "+e.id+" has been hit !  ")),d.default.displayHit(i),r.isSunk()&&(d.default.displayMessage(" Congratulations! You sank all battleships "),setTimeout(function(){d.default.displayEndMessage("Mission Complete"),d.default.finish(),d.default.end(r.getScore.score())},3e3)),!0)}!function(){var e=radar.getElementsByClassName(i)[0],t=e.offsetTop+e.offsetHeight/2,s=e.offsetLeft+e.offsetWidth/2;console.log(r.size);for(var n=0;n<r.ships.length;n++)r.ships[n].cordsY=d.default.navios[n].offsetTop+d.default.navios[n].offsetHeight/2,r.ships[n].cordsX=d.default.navios[n].offsetLeft+d.default.navios[n].offsetWidth/2,r.ships[n].cordsY-r.size<t&&t<r.ships[n].cordsY+r.size&&r.ships[n].cordsX-r.size<s&&s<r.ships[n].cordsX+r.size&&o(r.ships[n],d.default.navios[n]);!void(a.classList.contains("miss")||a.classList.contains("hit")||(d.default.displayMiss(i),d.default.displayMessage("You missed.")))}()},isSunk:function(){for(var e=0;e<r.ships.length;e++)if(!r.ships[e].sank)return!1;return!0},getScore:{score:function(){var t={shotsHit:0,shotsMiss:0,shipsSunk:0,time:0,total:0};if(!r.init)return!1;var e=document.getElementById("min").firstChild.data,s=document.getElementById("sec").firstChild.data;return t.time=60*parseFloat(e)+parseFloat(s),r.square.forEach(function(e){e.classList.contains("hit")?t.shotsHit++:e.classList.contains("miss")&&t.shotsMiss++}),r.ships.forEach(function(e){0===e.res&&t.shipsSunk++}),t.total=t.time+25*t.shotsHit+70*t.shipsSunk-10*t.shotsMiss,t}}},i=r;s.default=i},{"./view.js":4}],4:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var n=a(e("./model.js")),i=a(e("./controller.js"));function a(e){return e&&e.__esModule?e:{default:e}}var o={navios:document.querySelectorAll(".ships"),message:document.getElementById("messageArea"),messageEnd:document.getElementById("messageEnd"),antena:document.querySelector(".antena"),mapa:document.getElementById("radar"),cronometro:document.getElementById("countDown"),interval:null,points:document.querySelectorAll(".point-list-item span"),overlay:document.getElementById("overlay"),modal:document.getElementById("modal"),list:document.getElementsByClassName("point-list-item"),rankWrap:document.getElementById("rank-wrap"),rankList:document.getElementById("rank-list"),start:function(){var e=this;n.default.init=!0,this.mapa.classList.add("radar-map"),i.default.btnStart.classList.add("is-active"),i.default.btnStart.disabled=!0,i.default.btnRank.disabled=!0,i.default.input.disabled=!1,i.default.input.focus(),this.countDown(),setTimeout(function(){e.antena.classList.remove("hidden"),i.default.btnStop.disabled=!1},5e3)},stop:function(){window.location.reload()},finish:function(){clearInterval(o.interval),o.mapa.querySelector(".antena").style.animationPlayState="paused",o.cronometro.style.animationPlayState="paused",i.default.btnStart.classList.remove("is-active"),i.default.input.disabled=!0,i.default.btnStop.disabled=!0,o.navios.forEach(function(e){e.style.animationPlayState="paused"}),o.cronometro.classList.remove("is--time-over"),o.end(n.default.getScore.score())},generateShips:function(){var e=function(e){for(var t=[],s=0;s<=e;s++)t.push(s);return t.sort(function(e,t){return Math.round(2*Math.random())-1}),t.splice(0,e+1)}(2);o.navios[e[0]].style.animationDirection="alternate-reverse";var t=0,s=setInterval(function(){o.navios[e[t]].classList.remove("hidden"),++t===o.navios.length&&clearInterval(s)},7e3)},displayMessage:function(e){this.message.textContent=e},displayHit:function(e){document.getElementById(e).classList.add("hit")},displayMiss:function(e){document.getElementById(e).classList.add("miss")},displayEndMessage:function(e){this.messageEnd.textContent=e},damage:function(e,t){"hit"===t&&(e.classList.add("hitted"),setTimeout(function(){e.classList.remove("hitted")},3e3)),"sunk"===t&&e.classList.add("sunk")},countDown:function(){var e,t,s=this;e=30,t=2,o.interval=setInterval(function(){0==e&&(t--,e=60),document.getElementById("min").textContent=t<10?"0"+t:t,e--,document.getElementById("sec").textContent=e<10?"0"+e:e,0==t&&0==e&&(o.finish(),o.displayEndMessage("Mission is Over"))},1e3),setTimeout(function(){s.cronometro.style.visibility="visible"},6e4),setTimeout(function(){s.cronometro.classList.add("is--time-over")},12e4)},end:function(s){o.overlay.classList.add("display"),o.points.forEach(function(e){for(var t in s)e.getAttribute("id")==t&&(e.textContent=s[t])}),setTimeout(function(){o.modal.classList.add("display")},2e3),setTimeout(function(){var e=0,t=setInterval(function(){o.list[e].classList.add("display"),++e===o.list.length&&clearInterval(t)},2e3)},3e3),setTimeout(function(){i.default.btnStop.disabled=!1,i.default.btnStop.style.zIndex="9",i.default.btnRank.disabled=!1,i.default.addRank()},16e3)},rank:function(){o.modal.classList.contains("display")||o.overlay.classList.toggle("display"),o.rankWrap.classList.toggle("show-rank")},renderRank:function(){o.rankList.innerHTML="",db.collection("rank").orderBy("score","desc").get().then(function(e){e.docs.forEach(function(e){var t=document.createElement("li"),s=document.createElement("strong"),n=document.createElement("span");t.setAttribute("data-id",e.id),s.textContent=e.data().name,n.textContent=e.data().score,s.appendChild(n),t.appendChild(s),o.rankList.appendChild(t)})})}},d=o;s.default=d},{"./controller.js":1,"./model.js":3}]},{},[2]);