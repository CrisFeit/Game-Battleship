!function a(i,o,d){function r(n,e){if(!o[n]){if(!i[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(l)return l(n,!0);throw new Error("Cannot find module '"+n+"'")}var s=o[n]={exports:{}};i[n][0].call(s.exports,function(e){var t=i[n][1][e];return r(t||e)},s,s.exports,a,i,o,d)}return o[n].exports}for(var l="function"==typeof require&&require,e=0;e<d.length;e++)r(d[e]);return r}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=s(e("./view.js")),o=s(e("./model.js"));function s(e){return e&&e.__esModule?e:{default:e}}var l={input:document.getElementById("guessInput"),fireButton:document.getElementById("fireButton"),btnStart:document.getElementById("start"),btnStop:document.getElementById("stop"),btnRank:document.getElementById("rank"),rankTitle:document.getElementById("rank-title"),btnSave:document.getElementById("save-score"),inputName:document.getElementById("rank-name"),form:document.getElementById("rank-form"),grid:document.getElementById("grid"),keyPress:function(){this.input.addEventListener("input",function(e){return function(e,t,n){var s,a=n.keyCode;1<e.value.length?(s=e.value.replace(/[^a-g][^0-6]+/g,"").toUpperCase(),e.value=s,l.fireReady(s)):(s=e.value.replace(/[^a-g]+/g,"").toUpperCase(),l.abort(),e.value=s);var i=0,o="",d=s.length;{if(8==a)return!0;for(var r=0;r<=d;r++)"-"==t.charAt(r)||"."==t.charAt(r)||"/"==t.charAt(r)||"("==t.charAt(r)||")"==t.charAt(r)||" "==t.charAt(r)?(o+=t.charAt(r),d++):(o+=s.charAt(i),i++);return e.value=o,!0}}(this,"00",e)}),this.grid.addEventListener("touchend",function(e){var t=e.target.getAttribute("id");o.default.fire(t,e.target)})},fireReady:function(e){if(e){var t=document.getElementById(e);if(t.classList.contains("hit")||t.classList.contains("miss"))i.default.displayMessage("Marked Field"),l.abort(fireEnter);else{var n=function(e){13===e.keyCode&&fireButton.click()};fireButton.disabled=!1,fireButton.classList.add("is--enabled"),l.input.addEventListener("keypress",n),fireButton.onclick=function(){var e=l.input.value;t=document.getElementById(e),o.default.fire(e,t),l.abort(n)}}return!1}},abort:function(e){fireButton.disabled=!0,fireButton.classList.remove("is--enabled"),l.input.removeEventListener("keypress",e),l.input.value="",l.input.focus()},addRank:function(){l.form.classList.add("fade-in"),l.btnSave.disabled=!1,l.inputName.disabled=!1,l.inputName.addEventListener("focusin",function(){l.inputName.classList.remove("is-invalid")}),l.form.addEventListener("submit",function(e){e.preventDefault();var s=o.default.getScore.score().total,a=l.inputName.value;if(!(0==a.length||20<a.length))return 600<s||!o.default.init?(a="Invalid Score",l.inputName.classList.add("is-invalid"),void setTimeout(function(){i.default.stop()},5e3)):void db.collection("rank").get().then(function(e){for(var t=e.docs,n=0;n<t.length;n++){if(t[n].data().name.toUpperCase()==a.trim().toUpperCase()&&t[n].data().score>=s)return a="Can't be done",void l.inputName.classList.add("is-invalid");if(t[n].data().name.toUpperCase()==a.trim().toUpperCase()&&t[n].data().score<s)return db.collection("rank").doc(t[n].id).update({score:s}),l.form.classList.remove("fade-in"),void setTimeout(function(){l.form.remove(),i.default.renderRank()},2e3);if(n+1===t.length)return db.collection("rank").add({name:a,score:s}),l.form.classList.remove("fade-in"),void setTimeout(function(){l.form.remove(),i.default.renderRank()},2e3)}});l.inputName.classList.add("is-invalid")})}},a=l;n.default=a},{"./model.js":3,"./view.js":4}],2:[function(e,t,n){"use strict";var s=i(e("./view.js")),a=i(e("./controller.js"));function i(e){return e&&e.__esModule?e:{default:e}}function o(){s.default.start(),s.default.generateShips(),a.default.keyPress(),a.default.btnStop.onclick=s.default.stop}document.addEventListener("DOMContentLoaded",function(){a.default.btnStart.onclick=o,a.default.btnRank.onclick=s.default.rank,a.default.rankTitle.onclick=s.default.rank,s.default.renderRank()})},{"./controller.js":1,"./view.js":4}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,r=(s=e("./view.js"))&&s.__esModule?s:{default:s};var l={square:document.querySelectorAll(".grid div"),ships:[{id:"ManoWar",cordsY:0,cordsX:0,res:3},{id:"Destroyer",cordsY:0,cordsX:0,res:2},{id:"Silence",cordsY:0,cordsX:0,res:2}],init:!1,fire:function(i,o){function d(e,t){return!o.classList.contains("hit")&&!o.classList.contains("miss")&&(e.res--,0===e.res?(e.sank=!0,r.default.damage(t,"sunk"),r.default.displayMessage("You sank the battleship "+e.id)):(r.default.damage(t,"hit"),r.default.displayMessage(" The "+e.id+" has been hit !  ")),r.default.displayHit(i),l.isSunk()&&(r.default.displayMessage(" Congratulations! You sank all battleships "),setTimeout(function(){r.default.displayEndMessage("Mission Complete"),r.default.finish(),r.default.end(l.getScore.score())},3e3)),!0)}!function(){for(var e=document.getElementById("radar-grid").firstElementChild.offsetWidth/2.5,t=radar.getElementsByClassName(i)[0],n=t.offsetTop+t.offsetHeight/2,s=t.offsetLeft+t.offsetWidth/2,a=0;a<l.ships.length;a++)l.ships[a].cordsY=r.default.navios[a].offsetTop+r.default.navios[a].offsetHeight/2,l.ships[a].cordsX=r.default.navios[a].offsetLeft+r.default.navios[a].offsetWidth/2,l.ships[a].cordsY-e<n&&n<l.ships[a].cordsY+e&&l.ships[a].cordsX-e<s&&s<l.ships[a].cordsX+e&&d(l.ships[a],r.default.navios[a]);!void(o.classList.contains("miss")||o.classList.contains("hit")||(r.default.displayMiss(i),r.default.displayMessage("You missed.")))}()},isSunk:function(){for(var e=0;e<l.ships.length;e++)if(!l.ships[e].sank)return!1;return!0},getScore:{score:function(){var t={shotsHit:0,shotsMiss:0,shipsSunk:0,time:0,total:0};if(!l.init)return!1;var e=document.getElementById("min").firstChild.data,n=document.getElementById("sec").firstChild.data;return t.time=60*parseFloat(e)+parseFloat(n),l.square.forEach(function(e){e.classList.contains("hit")?t.shotsHit++:e.classList.contains("miss")&&t.shotsMiss++}),l.ships.forEach(function(e){0===e.res&&t.shipsSunk++}),t.total=t.time+25*t.shotsHit+70*t.shipsSunk-10*t.shotsMiss,t}}},a=l;n.default=a},{"./view.js":4}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=i(e("./model.js")),a=i(e("./controller.js"));function i(e){return e&&e.__esModule?e:{default:e}}var o={navios:document.querySelectorAll(".ships"),message:document.getElementById("messageArea"),messageEnd:document.getElementById("messageEnd"),antena:document.querySelector(".antena"),mapa:document.getElementById("radar"),cronometro:document.getElementById("countDown"),interval:null,points:document.querySelectorAll(".point-list-item span"),overlay:document.getElementById("overlay"),modal:document.getElementById("modal"),list:document.getElementsByClassName("point-list-item"),rankWrap:document.getElementById("rank-wrap"),rankList:document.getElementById("rank-list"),start:function(){var e=this;s.default.init=!0,this.mapa.classList.add("radar-map"),a.default.btnStart.classList.add("is-active"),a.default.btnStart.disabled=!0,a.default.btnRank.disabled=!0,a.default.input.disabled=!1,a.default.input.focus(),this.countDown(),setTimeout(function(){e.antena.classList.remove("hidden"),a.default.btnStop.disabled=!1},5e3)},stop:function(){window.location.reload()},finish:function(){clearInterval(o.interval),o.mapa.querySelector(".antena").style.animationPlayState="paused",o.cronometro.style.animationPlayState="paused",a.default.btnStart.classList.remove("is-active"),a.default.input.disabled=!0,a.default.btnStop.disabled=!0,o.navios.forEach(function(e){e.style.animationPlayState="paused"}),o.cronometro.classList.remove("is--time-over"),o.end(s.default.getScore.score())},generateShips:function(){var e=function(e){for(var t=[],n=0;n<=e;n++)t.push(n);return t.sort(function(e,t){return Math.round(2*Math.random())-1}),t.splice(0,e+1)}(2);o.navios[e[0]].style.animationDirection="alternate-reverse";var t=0,n=setInterval(function(){o.navios[e[t]].classList.remove("hidden"),++t===o.navios.length&&clearInterval(n)},7e3)},displayMessage:function(e){this.message.textContent=e},displayHit:function(e){document.getElementById(e).classList.add("hit")},displayMiss:function(e){document.getElementById(e).classList.add("miss")},displayEndMessage:function(e){this.messageEnd.textContent=e},damage:function(e,t){"hit"===t&&(e.classList.add("hitted"),setTimeout(function(){e.classList.remove("hitted")},3e3)),"sunk"===t&&e.classList.add("sunk")},countDown:function(){var e,t,n=this;e=30,t=2,o.interval=setInterval(function(){0==e&&(t--,e=60),document.getElementById("min").textContent=t<10?"0"+t:t,e--,document.getElementById("sec").textContent=e<10?"0"+e:e,0==t&&0==e&&(o.finish(),o.displayEndMessage("Mission is Over"))},1e3),setTimeout(function(){n.cronometro.style.visibility="visible"},6e4),setTimeout(function(){n.cronometro.classList.add("is--time-over")},12e4)},end:function(n){o.overlay.classList.add("display"),o.points.forEach(function(e){for(var t in n)e.getAttribute("id")==t&&(e.textContent=n[t])}),setTimeout(function(){o.modal.classList.add("display")},2e3),setTimeout(function(){var e=0,t=setInterval(function(){o.list[e].classList.add("display"),++e===o.list.length&&clearInterval(t)},2e3)},3e3),setTimeout(function(){a.default.btnStop.disabled=!1,a.default.btnStop.style.zIndex="9",a.default.btnRank.disabled=!1,a.default.addRank()},16e3)},rank:function(){o.modal.classList.contains("display")||o.overlay.classList.toggle("display"),o.rankWrap.classList.toggle("show-rank")},renderRank:function(){o.rankList.innerHTML="",db.collection("rank").orderBy("score","desc").get().then(function(e){e.docs.forEach(function(e){var t=document.createElement("li"),n=document.createElement("strong"),s=document.createElement("span");t.setAttribute("data-id",e.id),n.textContent=e.data().name,s.textContent=e.data().score,n.appendChild(s),t.appendChild(n),o.rankList.appendChild(t)})})}},d=o;n.default=d},{"./controller.js":1,"./model.js":3}]},{},[2]);