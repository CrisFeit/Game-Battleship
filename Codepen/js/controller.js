(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

var controller = {
  input: document.getElementById('guessInput'),
  fireButton: document.getElementById('fireButton'),
  btnStart: document.getElementById('start'),
  btnStop: document.getElementById('stop'),
  btnRank: document.getElementById('rank'),
  rankTitle: document.getElementById('rank-title'),
  btnSave: document.getElementById('save-score'),
  inputName: document.getElementById('rank-name'),
  form: document.getElementById('rank-form'),
  grid: document.getElementById('grid'),
  keyPress: function keyPress() {
    this.input.addEventListener('input', function (e) {
      return parseGuess(this, '00', e);

      function parseGuess(campo, Mascara, evento) {
        var boleanoMascara;
        var Digitato = evento.keyCode;
        var campCheck;

        if (campo.value.length > 1) {
          campCheck = campo.value.replace(/[^a-g][^0-6]+/g, "").toUpperCase();
          campo.value = campCheck;
          controller.fireReady(campCheck);
        } else {
          campCheck = campo.value.replace(/[^a-g]+/g, "").toUpperCase();
          controller.abort();
          campo.value = campCheck;
        }

        var posicaoCampo = 0;
        var NovoValorCampo = "";
        var TamanhoMascara = campCheck.length;

        if (Digitato != 8) {
          // backspace
          for (var i = 0; i <= TamanhoMascara; i++) {
            boleanoMascara = Mascara.charAt(i) == "-" || Mascara.charAt(i) == "." || Mascara.charAt(i) == "/";
            boleanoMascara = boleanoMascara || Mascara.charAt(i) == "(" || Mascara.charAt(i) == ")" || Mascara.charAt(i) == " ";

            if (boleanoMascara) {
              NovoValorCampo += Mascara.charAt(i);
              TamanhoMascara++;
            } else {
              NovoValorCampo += campCheck.charAt(posicaoCampo);
              posicaoCampo++;
            }
          }

          campo.value = NovoValorCampo;
          return true;
        } else {
          return true;
        }
      }
    });
    this.grid.addEventListener('touchend', function (ev) {
      var touch = ev.target.getAttribute('id');
      model.fire(touch, ev.target);
    });
  },
  fireReady: function fireReady(campCheck) {
    if (campCheck) {
      var field = document.getElementById(campCheck);

      if (!field.classList.contains('hit') && !field.classList.contains('miss')) {
        var shoot = function shoot() {
          var valor = controller.input.value;
          field = document.getElementById(valor);
          model.fire(valor, field);
          controller.abort(_fireEnter);
        };

        var _fireEnter = function _fireEnter(e) {
          if (e.keyCode === 13) {
            fireButton.click();
          }
        };

        fireButton.disabled = false;
        fireButton.classList.add('is--enabled');
        controller.input.addEventListener('keypress', _fireEnter);
        fireButton.onclick = shoot;
        ;
      } else {
        view.displayMessage('Marked Field');
        controller.abort(fireEnter);
      }

      return false;
    }
  },
  abort: function abort(fireEnter) {
    fireButton.disabled = true;
    fireButton.classList.remove('is--enabled');
    controller.input.removeEventListener('keypress', fireEnter);
    controller.input.value = "";
    controller.input.focus();
  },
  addRank: function addRank() {
    controller.form.classList.add('fade-in');
    controller.btnSave.disabled = false;
    controller.inputName.disabled = false;
    controller.inputName.addEventListener('focusin', function () {
      controller.inputName.classList.remove('is-invalid');
    });
    controller.form.addEventListener('submit', function (e) {
      e.preventDefault();
      var currentScore = model.getScore.score().total;
      var warName = controller.inputName.value;

      if (warName.length == 0 || warName.length > 20) {
        controller.inputName.classList.add('is-invalid');
        return;
      }

      if (currentScore > 600 || !model.init) {
        warName = "Invalid Score";
        controller.inputName.classList.add('is-invalid');
        setTimeout(function () {
          view.stop();
        }, 5000);
        return;
      }

      db.collection('rank').get().then(function (snapshot) {
        var doc = snapshot.docs;

        for (var i = 0; i < doc.length; i++) {
          if (doc[i].data().name.toUpperCase() == warName.trim().toUpperCase() && doc[i].data().score >= currentScore) {
            warName = "Can't be done";
            controller.inputName.classList.add('is-invalid');
            return;
          } else if (doc[i].data().name.toUpperCase() == warName.trim().toUpperCase() && doc[i].data().score < currentScore) {
            db.collection('rank').doc(doc[i].id).update({
              score: currentScore
            });
            controller.form.classList.remove('fade-in');
            setTimeout(function () {
              controller.form.remove();
              view.renderRank();
            }, 2000);
            return;
          } else if (i + 1 === doc.length) {
            db.collection('rank').add({
              name: warName,
              score: currentScore
            });
            controller.form.classList.remove('fade-in');
            setTimeout(function () {
              controller.form.remove();
              view.renderRank();
            }, 2000);
            return;
          }
        }

        ;
      });
    });
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZha2VfNjJkYjViODcuanMiXSwibmFtZXMiOlsiY29udHJvbGxlciIsImlucHV0IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImZpcmVCdXR0b24iLCJidG5TdGFydCIsImJ0blN0b3AiLCJidG5SYW5rIiwicmFua1RpdGxlIiwiYnRuU2F2ZSIsImlucHV0TmFtZSIsImZvcm0iLCJncmlkIiwia2V5UHJlc3MiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInBhcnNlR3Vlc3MiLCJjYW1wbyIsIk1hc2NhcmEiLCJldmVudG8iLCJib2xlYW5vTWFzY2FyYSIsIkRpZ2l0YXRvIiwia2V5Q29kZSIsImNhbXBDaGVjayIsInZhbHVlIiwibGVuZ3RoIiwicmVwbGFjZSIsInRvVXBwZXJDYXNlIiwiZmlyZVJlYWR5IiwiYWJvcnQiLCJwb3NpY2FvQ2FtcG8iLCJOb3ZvVmFsb3JDYW1wbyIsIlRhbWFuaG9NYXNjYXJhIiwiaSIsImNoYXJBdCIsImV2IiwidG91Y2giLCJ0YXJnZXQiLCJnZXRBdHRyaWJ1dGUiLCJtb2RlbCIsImZpcmUiLCJmaWVsZCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwic2hvb3QiLCJ2YWxvciIsImZpcmVFbnRlciIsImNsaWNrIiwiZGlzYWJsZWQiLCJhZGQiLCJvbmNsaWNrIiwidmlldyIsImRpc3BsYXlNZXNzYWdlIiwicmVtb3ZlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImZvY3VzIiwiYWRkUmFuayIsInByZXZlbnREZWZhdWx0IiwiY3VycmVudFNjb3JlIiwiZ2V0U2NvcmUiLCJzY29yZSIsInRvdGFsIiwid2FyTmFtZSIsImluaXQiLCJzZXRUaW1lb3V0Iiwic3RvcCIsImRiIiwiY29sbGVjdGlvbiIsImdldCIsInRoZW4iLCJzbmFwc2hvdCIsImRvYyIsImRvY3MiLCJkYXRhIiwibmFtZSIsInRyaW0iLCJpZCIsInVwZGF0ZSIsInJlbmRlclJhbmsiXSwibWFwcGluZ3MiOiI7O0FBQ0EsSUFBTUEsVUFBVSxHQUFHO0FBQ2pCQyxFQUFBQSxLQUFLLEVBQUVDLFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixZQUF4QixDQURVO0FBRWpCQyxFQUFBQSxVQUFVLEVBQUVGLFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixZQUF4QixDQUZLO0FBR2pCRSxFQUFBQSxRQUFRLEVBQUVILFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixPQUF4QixDQUhPO0FBSWpCRyxFQUFBQSxPQUFPLEVBQUVKLFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixNQUF4QixDQUpRO0FBS2pCSSxFQUFBQSxPQUFPLEVBQUVMLFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixNQUF4QixDQUxRO0FBTWpCSyxFQUFBQSxTQUFTLEVBQUVOLFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixZQUF4QixDQU5NO0FBT2pCTSxFQUFBQSxPQUFPLEVBQUVQLFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixZQUF4QixDQVBRO0FBUWpCTyxFQUFBQSxTQUFTLEVBQUVSLFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixXQUF4QixDQVJNO0FBU2pCUSxFQUFBQSxJQUFJLEVBQUVULFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixXQUF4QixDQVRXO0FBVWpCUyxFQUFBQSxJQUFJLEVBQUVWLFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixNQUF4QixDQVZXO0FBWWpCVSxFQUFBQSxRQUFRLEVBQUUsb0JBQVk7QUFDcEIsU0FBS1osS0FBTCxDQUFXYSxnQkFBWCxDQUE0QixPQUE1QixFQUFxQyxVQUFVQyxDQUFWLEVBQWE7QUFFaEQsYUFBT0MsVUFBVSxDQUFDLElBQUQsRUFBTyxJQUFQLEVBQWFELENBQWIsQ0FBakI7O0FBRUEsZUFBU0MsVUFBVCxDQUFvQkMsS0FBcEIsRUFBMkJDLE9BQTNCLEVBQW9DQyxNQUFwQyxFQUE0QztBQUMxQyxZQUFJQyxjQUFKO0FBRUEsWUFBSUMsUUFBUSxHQUFHRixNQUFNLENBQUNHLE9BQXRCO0FBQ0EsWUFBSUMsU0FBSjs7QUFDQSxZQUFJTixLQUFLLENBQUNPLEtBQU4sQ0FBWUMsTUFBWixHQUFxQixDQUF6QixFQUE0QjtBQUMxQkYsVUFBQUEsU0FBUyxHQUFHTixLQUFLLENBQUNPLEtBQU4sQ0FBWUUsT0FBWixDQUFvQixnQkFBcEIsRUFBc0MsRUFBdEMsRUFBMENDLFdBQTFDLEVBQVo7QUFDQVYsVUFBQUEsS0FBSyxDQUFDTyxLQUFOLEdBQWNELFNBQWQ7QUFDQXZCLFVBQUFBLFVBQVUsQ0FBQzRCLFNBQVgsQ0FBcUJMLFNBQXJCO0FBQ0QsU0FKRCxNQUlPO0FBQ0xBLFVBQUFBLFNBQVMsR0FBR04sS0FBSyxDQUFDTyxLQUFOLENBQVlFLE9BQVosQ0FBb0IsVUFBcEIsRUFBZ0MsRUFBaEMsRUFBb0NDLFdBQXBDLEVBQVo7QUFDQTNCLFVBQUFBLFVBQVUsQ0FBQzZCLEtBQVg7QUFDQVosVUFBQUEsS0FBSyxDQUFDTyxLQUFOLEdBQWNELFNBQWQ7QUFDRDs7QUFFRCxZQUFJTyxZQUFZLEdBQUcsQ0FBbkI7QUFDQSxZQUFJQyxjQUFjLEdBQUcsRUFBckI7QUFDQSxZQUFJQyxjQUFjLEdBQUdULFNBQVMsQ0FBQ0UsTUFBL0I7O0FBRUEsWUFBSUosUUFBUSxJQUFJLENBQWhCLEVBQW1CO0FBQUU7QUFDbkIsZUFBSyxJQUFJWSxDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxJQUFJRCxjQUFyQixFQUFxQ0MsQ0FBQyxFQUF0QyxFQUEwQztBQUN4Q2IsWUFBQUEsY0FBYyxHQUFLRixPQUFPLENBQUNnQixNQUFSLENBQWVELENBQWYsS0FBcUIsR0FBdEIsSUFBK0JmLE9BQU8sQ0FBQ2dCLE1BQVIsQ0FBZUQsQ0FBZixLQUFxQixHQUFwRCxJQUNmZixPQUFPLENBQUNnQixNQUFSLENBQWVELENBQWYsS0FBcUIsR0FEeEI7QUFFQWIsWUFBQUEsY0FBYyxHQUFHQSxjQUFjLElBQU1GLE9BQU8sQ0FBQ2dCLE1BQVIsQ0FBZUQsQ0FBZixLQUFxQixHQUF0QixJQUNqQ2YsT0FBTyxDQUFDZ0IsTUFBUixDQUFlRCxDQUFmLEtBQXFCLEdBRFksSUFDSGYsT0FBTyxDQUFDZ0IsTUFBUixDQUFlRCxDQUFmLEtBQXFCLEdBRHREOztBQUVBLGdCQUFJYixjQUFKLEVBQW9CO0FBQ2xCVyxjQUFBQSxjQUFjLElBQUliLE9BQU8sQ0FBQ2dCLE1BQVIsQ0FBZUQsQ0FBZixDQUFsQjtBQUNBRCxjQUFBQSxjQUFjO0FBQ2YsYUFIRCxNQUdPO0FBQ0xELGNBQUFBLGNBQWMsSUFBSVIsU0FBUyxDQUFDVyxNQUFWLENBQWlCSixZQUFqQixDQUFsQjtBQUNBQSxjQUFBQSxZQUFZO0FBQ2I7QUFDRjs7QUFDRGIsVUFBQUEsS0FBSyxDQUFDTyxLQUFOLEdBQWNPLGNBQWQ7QUFDQSxpQkFBTyxJQUFQO0FBQ0QsU0FoQkQsTUFnQk87QUFDTCxpQkFBTyxJQUFQO0FBQ0Q7QUFDRjtBQUNGLEtBM0NEO0FBNENBLFNBQUtuQixJQUFMLENBQVVFLGdCQUFWLENBQTJCLFVBQTNCLEVBQXNDLFVBQVNxQixFQUFULEVBQVk7QUFDaEQsVUFBSUMsS0FBSyxHQUFHRCxFQUFFLENBQUNFLE1BQUgsQ0FBVUMsWUFBVixDQUF1QixJQUF2QixDQUFaO0FBRUFDLE1BQUFBLEtBQUssQ0FBQ0MsSUFBTixDQUFXSixLQUFYLEVBQWtCRCxFQUFFLENBQUNFLE1BQXJCO0FBQ0QsS0FKRDtBQUtELEdBOURnQjtBQWdFakJULEVBQUFBLFNBQVMsRUFBRSxtQkFBVUwsU0FBVixFQUFxQjtBQUM5QixRQUFJQSxTQUFKLEVBQWU7QUFDYixVQUFJa0IsS0FBSyxHQUFHdkMsUUFBUSxDQUFDQyxjQUFULENBQXdCb0IsU0FBeEIsQ0FBWjs7QUFFQSxVQUFJLENBQUNrQixLQUFLLENBQUNDLFNBQU4sQ0FBZ0JDLFFBQWhCLENBQXlCLEtBQXpCLENBQUQsSUFBb0MsQ0FBQ0YsS0FBSyxDQUFDQyxTQUFOLENBQWdCQyxRQUFoQixDQUF5QixNQUF6QixDQUF6QyxFQUEyRTtBQUFBLFlBTWhFQyxLQU5nRSxHQU16RSxTQUFTQSxLQUFULEdBQWlCO0FBQ2YsY0FBSUMsS0FBSyxHQUFHN0MsVUFBVSxDQUFDQyxLQUFYLENBQWlCdUIsS0FBN0I7QUFDQWlCLFVBQUFBLEtBQUssR0FBR3ZDLFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QjBDLEtBQXhCLENBQVI7QUFDQU4sVUFBQUEsS0FBSyxDQUFDQyxJQUFOLENBQVdLLEtBQVgsRUFBa0JKLEtBQWxCO0FBQ0F6QyxVQUFBQSxVQUFVLENBQUM2QixLQUFYLENBQWlCaUIsVUFBakI7QUFDRCxTQVh3RTs7QUFBQSxZQWFoRUEsVUFiZ0UsR0FhekUsU0FBU0EsVUFBVCxDQUFtQi9CLENBQW5CLEVBQXNCO0FBQ3BCLGNBQUlBLENBQUMsQ0FBQ08sT0FBRixLQUFjLEVBQWxCLEVBQXNCO0FBQ3BCbEIsWUFBQUEsVUFBVSxDQUFDMkMsS0FBWDtBQUNEO0FBQ0YsU0FqQndFOztBQUN6RTNDLFFBQUFBLFVBQVUsQ0FBQzRDLFFBQVgsR0FBc0IsS0FBdEI7QUFDQTVDLFFBQUFBLFVBQVUsQ0FBQ3NDLFNBQVgsQ0FBcUJPLEdBQXJCLENBQXlCLGFBQXpCO0FBQ0FqRCxRQUFBQSxVQUFVLENBQUNDLEtBQVgsQ0FBaUJhLGdCQUFqQixDQUFrQyxVQUFsQyxFQUE4Q2dDLFVBQTlDO0FBQ0ExQyxRQUFBQSxVQUFVLENBQUM4QyxPQUFYLEdBQXFCTixLQUFyQjtBQU9DO0FBT0YsT0FsQkQsTUFrQk87QUFDTE8sUUFBQUEsSUFBSSxDQUFDQyxjQUFMLENBQW9CLGNBQXBCO0FBQ0FwRCxRQUFBQSxVQUFVLENBQUM2QixLQUFYLENBQWlCaUIsU0FBakI7QUFDRDs7QUFDRCxhQUFPLEtBQVA7QUFDRDtBQUNGLEdBNUZnQjtBQThGakJqQixFQUFBQSxLQUFLLEVBQUUsZUFBVWlCLFNBQVYsRUFBcUI7QUFDMUIxQyxJQUFBQSxVQUFVLENBQUM0QyxRQUFYLEdBQXNCLElBQXRCO0FBQ0E1QyxJQUFBQSxVQUFVLENBQUNzQyxTQUFYLENBQXFCVyxNQUFyQixDQUE0QixhQUE1QjtBQUNBckQsSUFBQUEsVUFBVSxDQUFDQyxLQUFYLENBQWlCcUQsbUJBQWpCLENBQXFDLFVBQXJDLEVBQWlEUixTQUFqRDtBQUNBOUMsSUFBQUEsVUFBVSxDQUFDQyxLQUFYLENBQWlCdUIsS0FBakIsR0FBeUIsRUFBekI7QUFDQXhCLElBQUFBLFVBQVUsQ0FBQ0MsS0FBWCxDQUFpQnNELEtBQWpCO0FBQ0QsR0FwR2dCO0FBc0dqQkMsRUFBQUEsT0FBTyxFQUFFLG1CQUFZO0FBQ25CeEQsSUFBQUEsVUFBVSxDQUFDVyxJQUFYLENBQWdCK0IsU0FBaEIsQ0FBMEJPLEdBQTFCLENBQThCLFNBQTlCO0FBQ0FqRCxJQUFBQSxVQUFVLENBQUNTLE9BQVgsQ0FBbUJ1QyxRQUFuQixHQUE4QixLQUE5QjtBQUNBaEQsSUFBQUEsVUFBVSxDQUFDVSxTQUFYLENBQXFCc0MsUUFBckIsR0FBZ0MsS0FBaEM7QUFFQWhELElBQUFBLFVBQVUsQ0FBQ1UsU0FBWCxDQUFxQkksZ0JBQXJCLENBQXNDLFNBQXRDLEVBQWlELFlBQU07QUFDckRkLE1BQUFBLFVBQVUsQ0FBQ1UsU0FBWCxDQUFxQmdDLFNBQXJCLENBQStCVyxNQUEvQixDQUFzQyxZQUF0QztBQUNELEtBRkQ7QUFJQXJELElBQUFBLFVBQVUsQ0FBQ1csSUFBWCxDQUFnQkcsZ0JBQWhCLENBQWlDLFFBQWpDLEVBQTJDLFVBQUNDLENBQUQsRUFBTztBQUNoREEsTUFBQUEsQ0FBQyxDQUFDMEMsY0FBRjtBQUNBLFVBQUlDLFlBQVksR0FBR25CLEtBQUssQ0FBQ29CLFFBQU4sQ0FBZUMsS0FBZixHQUF1QkMsS0FBMUM7QUFDQSxVQUFJQyxPQUFPLEdBQUc5RCxVQUFVLENBQUNVLFNBQVgsQ0FBcUJjLEtBQW5DOztBQUVBLFVBQUlzQyxPQUFPLENBQUNyQyxNQUFSLElBQWtCLENBQWxCLElBQXVCcUMsT0FBTyxDQUFDckMsTUFBUixHQUFpQixFQUE1QyxFQUFnRDtBQUM5Q3pCLFFBQUFBLFVBQVUsQ0FBQ1UsU0FBWCxDQUFxQmdDLFNBQXJCLENBQStCTyxHQUEvQixDQUFtQyxZQUFuQztBQUNBO0FBQ0Q7O0FBQ0QsVUFBSVMsWUFBWSxHQUFHLEdBQWYsSUFBc0IsQ0FBQ25CLEtBQUssQ0FBQ3dCLElBQWpDLEVBQXVDO0FBQ3JDRCxRQUFBQSxPQUFPLEdBQUcsZUFBVjtBQUNBOUQsUUFBQUEsVUFBVSxDQUFDVSxTQUFYLENBQXFCZ0MsU0FBckIsQ0FBK0JPLEdBQS9CLENBQW1DLFlBQW5DO0FBQ0FlLFFBQUFBLFVBQVUsQ0FBQyxZQUFNO0FBQ2ZiLFVBQUFBLElBQUksQ0FBQ2MsSUFBTDtBQUNELFNBRlMsRUFFUCxJQUZPLENBQVY7QUFHQTtBQUNEOztBQUVEQyxNQUFBQSxFQUFFLENBQUNDLFVBQUgsQ0FBYyxNQUFkLEVBQXNCQyxHQUF0QixHQUE0QkMsSUFBNUIsQ0FBaUMsVUFBQUMsUUFBUSxFQUFJO0FBQzNDLFlBQUlDLEdBQUcsR0FBR0QsUUFBUSxDQUFDRSxJQUFuQjs7QUFDQSxhQUFLLElBQUl2QyxDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHc0MsR0FBRyxDQUFDOUMsTUFBeEIsRUFBZ0NRLENBQUMsRUFBakMsRUFBcUM7QUFDbkMsY0FBSXNDLEdBQUcsQ0FBQ3RDLENBQUQsQ0FBSCxDQUFPd0MsSUFBUCxHQUFjQyxJQUFkLENBQW1CL0MsV0FBbkIsTUFBb0NtQyxPQUFPLENBQUNhLElBQVIsR0FBZWhELFdBQWYsRUFBcEMsSUFBb0U0QyxHQUFHLENBQUN0QyxDQUFELENBQUgsQ0FBT3dDLElBQVAsR0FBY2IsS0FBZCxJQUF1QkYsWUFBL0YsRUFBNkc7QUFFM0dJLFlBQUFBLE9BQU8sR0FBRyxlQUFWO0FBQ0E5RCxZQUFBQSxVQUFVLENBQUNVLFNBQVgsQ0FBcUJnQyxTQUFyQixDQUErQk8sR0FBL0IsQ0FBbUMsWUFBbkM7QUFDQTtBQUVELFdBTkQsTUFNTyxJQUFJc0IsR0FBRyxDQUFDdEMsQ0FBRCxDQUFILENBQU93QyxJQUFQLEdBQWNDLElBQWQsQ0FBbUIvQyxXQUFuQixNQUFvQ21DLE9BQU8sQ0FBQ2EsSUFBUixHQUFlaEQsV0FBZixFQUFwQyxJQUFvRTRDLEdBQUcsQ0FBQ3RDLENBQUQsQ0FBSCxDQUFPd0MsSUFBUCxHQUFjYixLQUFkLEdBQXNCRixZQUE5RixFQUE0RztBQUNqSFEsWUFBQUEsRUFBRSxDQUFDQyxVQUFILENBQWMsTUFBZCxFQUFzQkksR0FBdEIsQ0FBMEJBLEdBQUcsQ0FBQ3RDLENBQUQsQ0FBSCxDQUFPMkMsRUFBakMsRUFBcUNDLE1BQXJDLENBQTRDO0FBQzFDakIsY0FBQUEsS0FBSyxFQUFFRjtBQURtQyxhQUE1QztBQUdBMUQsWUFBQUEsVUFBVSxDQUFDVyxJQUFYLENBQWdCK0IsU0FBaEIsQ0FBMEJXLE1BQTFCLENBQWlDLFNBQWpDO0FBQ0FXLFlBQUFBLFVBQVUsQ0FBQyxZQUFNO0FBQ2ZoRSxjQUFBQSxVQUFVLENBQUNXLElBQVgsQ0FBZ0IwQyxNQUFoQjtBQUNBRixjQUFBQSxJQUFJLENBQUMyQixVQUFMO0FBQ0QsYUFIUyxFQUdQLElBSE8sQ0FBVjtBQUlBO0FBRUQsV0FYTSxNQVdBLElBQUk3QyxDQUFDLEdBQUcsQ0FBSixLQUFVc0MsR0FBRyxDQUFDOUMsTUFBbEIsRUFBMEI7QUFDL0J5QyxZQUFBQSxFQUFFLENBQUNDLFVBQUgsQ0FBYyxNQUFkLEVBQXNCbEIsR0FBdEIsQ0FBMEI7QUFDeEJ5QixjQUFBQSxJQUFJLEVBQUVaLE9BRGtCO0FBRXhCRixjQUFBQSxLQUFLLEVBQUVGO0FBRmlCLGFBQTFCO0FBSUExRCxZQUFBQSxVQUFVLENBQUNXLElBQVgsQ0FBZ0IrQixTQUFoQixDQUEwQlcsTUFBMUIsQ0FBaUMsU0FBakM7QUFDQVcsWUFBQUEsVUFBVSxDQUFDLFlBQU07QUFDZmhFLGNBQUFBLFVBQVUsQ0FBQ1csSUFBWCxDQUFnQjBDLE1BQWhCO0FBQ0FGLGNBQUFBLElBQUksQ0FBQzJCLFVBQUw7QUFDRCxhQUhTLEVBR1AsSUFITyxDQUFWO0FBSUE7QUFDRDtBQUNGOztBQUFBO0FBQ0YsT0FqQ0Q7QUFrQ0QsS0FwREQ7QUFxREQ7QUFwS2dCLENBQW5CIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbmNvbnN0IGNvbnRyb2xsZXIgPSB7XHJcbiAgaW5wdXQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndWVzc0lucHV0JyksXHJcbiAgZmlyZUJ1dHRvbjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpcmVCdXR0b24nKSxcclxuICBidG5TdGFydDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXJ0JyksXHJcbiAgYnRuU3RvcDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0b3AnKSxcclxuICBidG5SYW5rOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmFuaycpLFxyXG4gIHJhbmtUaXRsZTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JhbmstdGl0bGUnKSxcclxuICBidG5TYXZlOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2F2ZS1zY29yZScpLFxyXG4gIGlucHV0TmFtZTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JhbmstbmFtZScpLFxyXG4gIGZvcm06IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyYW5rLWZvcm0nKSxcclxuICBncmlkOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3JpZCcpLFxyXG5cclxuICBrZXlQcmVzczogZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5pbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uIChlKSB7XHJcblxyXG4gICAgICByZXR1cm4gcGFyc2VHdWVzcyh0aGlzLCAnMDAnLCBlKTtcclxuXHJcbiAgICAgIGZ1bmN0aW9uIHBhcnNlR3Vlc3MoY2FtcG8sIE1hc2NhcmEsIGV2ZW50bykge1xyXG4gICAgICAgIGxldCBib2xlYW5vTWFzY2FyYTtcclxuXHJcbiAgICAgICAgbGV0IERpZ2l0YXRvID0gZXZlbnRvLmtleUNvZGU7XHJcbiAgICAgICAgbGV0IGNhbXBDaGVjaztcclxuICAgICAgICBpZiAoY2FtcG8udmFsdWUubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgY2FtcENoZWNrID0gY2FtcG8udmFsdWUucmVwbGFjZSgvW15hLWddW14wLTZdKy9nLCBcIlwiKS50b1VwcGVyQ2FzZSgpO1xyXG4gICAgICAgICAgY2FtcG8udmFsdWUgPSBjYW1wQ2hlY2s7XHJcbiAgICAgICAgICBjb250cm9sbGVyLmZpcmVSZWFkeShjYW1wQ2hlY2spO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjYW1wQ2hlY2sgPSBjYW1wby52YWx1ZS5yZXBsYWNlKC9bXmEtZ10rL2csIFwiXCIpLnRvVXBwZXJDYXNlKCk7XHJcbiAgICAgICAgICBjb250cm9sbGVyLmFib3J0KCk7XHJcbiAgICAgICAgICBjYW1wby52YWx1ZSA9IGNhbXBDaGVjaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBwb3NpY2FvQ2FtcG8gPSAwO1xyXG4gICAgICAgIGxldCBOb3ZvVmFsb3JDYW1wbyA9IFwiXCI7XHJcbiAgICAgICAgbGV0IFRhbWFuaG9NYXNjYXJhID0gY2FtcENoZWNrLmxlbmd0aDtcclxuXHJcbiAgICAgICAgaWYgKERpZ2l0YXRvICE9IDgpIHsgLy8gYmFja3NwYWNlXHJcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBUYW1hbmhvTWFzY2FyYTsgaSsrKSB7XHJcbiAgICAgICAgICAgIGJvbGVhbm9NYXNjYXJhID0gKChNYXNjYXJhLmNoYXJBdChpKSA9PSBcIi1cIikgfHwgKE1hc2NhcmEuY2hhckF0KGkpID09IFwiLlwiKSB8fFxyXG4gICAgICAgICAgICAgIChNYXNjYXJhLmNoYXJBdChpKSA9PSBcIi9cIikpXHJcbiAgICAgICAgICAgIGJvbGVhbm9NYXNjYXJhID0gYm9sZWFub01hc2NhcmEgfHwgKChNYXNjYXJhLmNoYXJBdChpKSA9PSBcIihcIikgfHxcclxuICAgICAgICAgICAgICAoTWFzY2FyYS5jaGFyQXQoaSkgPT0gXCIpXCIpIHx8IChNYXNjYXJhLmNoYXJBdChpKSA9PSBcIiBcIikpXHJcbiAgICAgICAgICAgIGlmIChib2xlYW5vTWFzY2FyYSkge1xyXG4gICAgICAgICAgICAgIE5vdm9WYWxvckNhbXBvICs9IE1hc2NhcmEuY2hhckF0KGkpO1xyXG4gICAgICAgICAgICAgIFRhbWFuaG9NYXNjYXJhKys7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgTm92b1ZhbG9yQ2FtcG8gKz0gY2FtcENoZWNrLmNoYXJBdChwb3NpY2FvQ2FtcG8pO1xyXG4gICAgICAgICAgICAgIHBvc2ljYW9DYW1wbysrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBjYW1wby52YWx1ZSA9IE5vdm9WYWxvckNhbXBvO1xyXG4gICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgIHRoaXMuZ3JpZC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsZnVuY3Rpb24oZXYpe1xyXG4gICAgICBsZXQgdG91Y2ggPSBldi50YXJnZXQuZ2V0QXR0cmlidXRlKCdpZCcpO1xyXG4gICAgICBcclxuICAgICAgbW9kZWwuZmlyZSh0b3VjaCwgZXYudGFyZ2V0KTtcclxuICAgIH0pO1xyXG4gIH0sXHJcblxyXG4gIGZpcmVSZWFkeTogZnVuY3Rpb24gKGNhbXBDaGVjaykge1xyXG4gICAgaWYgKGNhbXBDaGVjaykge1xyXG4gICAgICBsZXQgZmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjYW1wQ2hlY2spO1xyXG5cclxuICAgICAgaWYgKCFmaWVsZC5jbGFzc0xpc3QuY29udGFpbnMoJ2hpdCcpICYmICFmaWVsZC5jbGFzc0xpc3QuY29udGFpbnMoJ21pc3MnKSkge1xyXG4gICAgICAgIGZpcmVCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICBmaXJlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2lzLS1lbmFibGVkJyk7XHJcbiAgICAgICAgY29udHJvbGxlci5pbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIGZpcmVFbnRlcik7XHJcbiAgICAgICAgZmlyZUJ1dHRvbi5vbmNsaWNrID0gc2hvb3Q7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNob290KCkge1xyXG4gICAgICAgICAgbGV0IHZhbG9yID0gY29udHJvbGxlci5pbnB1dC52YWx1ZTtcclxuICAgICAgICAgIGZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodmFsb3IpO1xyXG4gICAgICAgICAgbW9kZWwuZmlyZSh2YWxvciwgZmllbGQpO1xyXG4gICAgICAgICAgY29udHJvbGxlci5hYm9ydChmaXJlRW50ZXIpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGZpcmVFbnRlcihlKSB7XHJcbiAgICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAxMykge1xyXG4gICAgICAgICAgICBmaXJlQnV0dG9uLmNsaWNrKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZpZXcuZGlzcGxheU1lc3NhZ2UoJ01hcmtlZCBGaWVsZCcpO1xyXG4gICAgICAgIGNvbnRyb2xsZXIuYWJvcnQoZmlyZUVudGVyKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfSxcclxuXHJcbiAgYWJvcnQ6IGZ1bmN0aW9uIChmaXJlRW50ZXIpIHtcclxuICAgIGZpcmVCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgZmlyZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdpcy0tZW5hYmxlZCcpO1xyXG4gICAgY29udHJvbGxlci5pbnB1dC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIGZpcmVFbnRlcik7XHJcbiAgICBjb250cm9sbGVyLmlucHV0LnZhbHVlID0gXCJcIjtcclxuICAgIGNvbnRyb2xsZXIuaW5wdXQuZm9jdXMoKTtcclxuICB9LFxyXG5cclxuICBhZGRSYW5rOiBmdW5jdGlvbiAoKSB7XHJcbiAgICBjb250cm9sbGVyLmZvcm0uY2xhc3NMaXN0LmFkZCgnZmFkZS1pbicpO1xyXG4gICAgY29udHJvbGxlci5idG5TYXZlLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICBjb250cm9sbGVyLmlucHV0TmFtZS5kaXNhYmxlZCA9IGZhbHNlO1xyXG5cclxuICAgIGNvbnRyb2xsZXIuaW5wdXROYW1lLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzaW4nLCAoKSA9PiB7XHJcbiAgICAgIGNvbnRyb2xsZXIuaW5wdXROYW1lLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWludmFsaWQnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnRyb2xsZXIuZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGxldCBjdXJyZW50U2NvcmUgPSBtb2RlbC5nZXRTY29yZS5zY29yZSgpLnRvdGFsO1xyXG4gICAgICBsZXQgd2FyTmFtZSA9IGNvbnRyb2xsZXIuaW5wdXROYW1lLnZhbHVlO1xyXG5cclxuICAgICAgaWYgKHdhck5hbWUubGVuZ3RoID09IDAgfHwgd2FyTmFtZS5sZW5ndGggPiAyMCkge1xyXG4gICAgICAgIGNvbnRyb2xsZXIuaW5wdXROYW1lLmNsYXNzTGlzdC5hZGQoJ2lzLWludmFsaWQnKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGN1cnJlbnRTY29yZSA+IDYwMCB8fCAhbW9kZWwuaW5pdCkge1xyXG4gICAgICAgIHdhck5hbWUgPSBcIkludmFsaWQgU2NvcmVcIlxyXG4gICAgICAgIGNvbnRyb2xsZXIuaW5wdXROYW1lLmNsYXNzTGlzdC5hZGQoJ2lzLWludmFsaWQnKTtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgIHZpZXcuc3RvcCgpO1xyXG4gICAgICAgIH0sIDUwMDApO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgZGIuY29sbGVjdGlvbigncmFuaycpLmdldCgpLnRoZW4oc25hcHNob3QgPT4ge1xyXG4gICAgICAgIGxldCBkb2MgPSBzbmFwc2hvdC5kb2NzO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZG9jLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBpZiAoZG9jW2ldLmRhdGEoKS5uYW1lLnRvVXBwZXJDYXNlKCkgPT0gd2FyTmFtZS50cmltKCkudG9VcHBlckNhc2UoKSAmJiBkb2NbaV0uZGF0YSgpLnNjb3JlID49IGN1cnJlbnRTY29yZSkge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgd2FyTmFtZSA9IFwiQ2FuJ3QgYmUgZG9uZVwiO1xyXG4gICAgICAgICAgICBjb250cm9sbGVyLmlucHV0TmFtZS5jbGFzc0xpc3QuYWRkKCdpcy1pbnZhbGlkJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICB9IGVsc2UgaWYgKGRvY1tpXS5kYXRhKCkubmFtZS50b1VwcGVyQ2FzZSgpID09IHdhck5hbWUudHJpbSgpLnRvVXBwZXJDYXNlKCkgJiYgZG9jW2ldLmRhdGEoKS5zY29yZSA8IGN1cnJlbnRTY29yZSkge1xyXG4gICAgICAgICAgICBkYi5jb2xsZWN0aW9uKCdyYW5rJykuZG9jKGRvY1tpXS5pZCkudXBkYXRlKHtcclxuICAgICAgICAgICAgICBzY29yZTogY3VycmVudFNjb3JlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb250cm9sbGVyLmZvcm0uY2xhc3NMaXN0LnJlbW92ZSgnZmFkZS1pbicpO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICBjb250cm9sbGVyLmZvcm0ucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgdmlldy5yZW5kZXJSYW5rKCk7XHJcbiAgICAgICAgICAgIH0sIDIwMDApO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgfSBlbHNlIGlmIChpICsgMSA9PT0gZG9jLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBkYi5jb2xsZWN0aW9uKCdyYW5rJykuYWRkKHtcclxuICAgICAgICAgICAgICBuYW1lOiB3YXJOYW1lLFxyXG4gICAgICAgICAgICAgIHNjb3JlOiBjdXJyZW50U2NvcmVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuZm9ybS5jbGFzc0xpc3QucmVtb3ZlKCdmYWRlLWluJyk7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnRyb2xsZXIuZm9ybS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICB2aWV3LnJlbmRlclJhbmsoKTtcclxuICAgICAgICAgICAgfSwgMjAwMCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH0sXHJcbn0iXX0=
},{}]},{},[1])