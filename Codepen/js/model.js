(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

var model = {
  square: document.querySelectorAll('.grid div'),
  ships: [{
    id: "ManoWar",
    cordsY: 0,
    cordsX: 0,
    res: 3
  }, {
    id: "Destroyer",
    cordsY: 0,
    cordsX: 0,
    res: 2
  }, {
    id: "Silence",
    cordsY: 0,
    cordsX: 0,
    res: 2
  }],
  init: false,
  fire: function fire(guess, field) {
    shot();

    function shot() {
      var size = document.getElementById('radar-grid').firstElementChild.offsetWidth / 2.5;
      var grid = radar.getElementsByClassName(guess)[0];
      var gridY = grid.offsetTop + grid.offsetHeight / 2;
      var gridX = grid.offsetLeft + grid.offsetWidth / 2;

      for (var i = 0; i < model.ships.length; i++) {
        model.ships[i].cordsY = view.navios[i].offsetTop + view.navios[i].offsetHeight / 2;
        model.ships[i].cordsX = view.navios[i].offsetLeft + view.navios[i].offsetWidth / 2;

        if (model.ships[i].cordsY - size < gridY && gridY < model.ships[i].cordsY + size && model.ships[i].cordsX - size < gridX && gridX < model.ships[i].cordsX + size) {
          hit(model.ships[i], view.navios[i]);
        }
      }

      miss();
    }

    function hit(ship, navio) {
      if (!field.classList.contains('hit') && !field.classList.contains('miss')) {
        ship.res--;

        if (ship.res === 0) {
          ship.sank = true;
          view.damage(navio, 'sunk');
          view.displayMessage('You sank the battleship ' + ship.id);
        } else {
          view.damage(navio, 'hit');
          view.displayMessage(' The ' + ship.id + ' has been hit !  ');
        }

        view.displayHit(guess);

        if (model.isSunk()) {
          view.displayMessage(' Congratulations! You sank all battleships ');
          setTimeout(function () {
            view.displayEndMessage('Mission Complete');
            view.finish();
            view.end(model.getScore.score());
          }, 3000);
        }

        return true;
      }

      return false;
    }

    ;

    function miss() {
      if (!field.classList.contains('miss') && !field.classList.contains('hit')) {
        view.displayMiss(guess);
        view.displayMessage('You missed.');
      }

      return false;
    }

    ;
  },
  isSunk: function isSunk() {
    for (var i = 0; i < model.ships.length; i++) {
      if (!model.ships[i].sank) {
        return false;
      }
    }

    return true;
  },
  getScore: function () {
    function score() {
      var points = {
        shotsHit: 0,
        shotsMiss: 0,
        shipsSunk: 0,
        time: 0,
        total: 0
      };

      if (!model.init) {
        return false;
      }

      var min = document.getElementById('min').firstChild.data;
      var sec = document.getElementById('sec').firstChild.data;
      points.time = parseFloat(min) * 60 + parseFloat(sec);
      model.square.forEach(function (el) {
        if (el.classList.contains('hit')) {
          points.shotsHit++;
        } else if (el.classList.contains('miss')) {
          points.shotsMiss++;
        }
      });
      model.ships.forEach(function (navio) {
        if (navio.res === 0) {
          points.shipsSunk++;
        }
      });
      points.total = points.time + points.shotsHit * 25 + points.shipsSunk * 70 - points.shotsMiss * 10;
      return points;
    }

    return {
      score: score
    };
  }()
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZha2VfMWEzODczNC5qcyJdLCJuYW1lcyI6WyJtb2RlbCIsInNxdWFyZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsInNoaXBzIiwiaWQiLCJjb3Jkc1kiLCJjb3Jkc1giLCJyZXMiLCJpbml0IiwiZmlyZSIsImd1ZXNzIiwiZmllbGQiLCJzaG90Iiwic2l6ZSIsImdldEVsZW1lbnRCeUlkIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJvZmZzZXRXaWR0aCIsImdyaWQiLCJyYWRhciIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJncmlkWSIsIm9mZnNldFRvcCIsIm9mZnNldEhlaWdodCIsImdyaWRYIiwib2Zmc2V0TGVmdCIsImkiLCJsZW5ndGgiLCJ2aWV3IiwibmF2aW9zIiwiaGl0IiwibWlzcyIsInNoaXAiLCJuYXZpbyIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwic2FuayIsImRhbWFnZSIsImRpc3BsYXlNZXNzYWdlIiwiZGlzcGxheUhpdCIsImlzU3VuayIsInNldFRpbWVvdXQiLCJkaXNwbGF5RW5kTWVzc2FnZSIsImZpbmlzaCIsImVuZCIsImdldFNjb3JlIiwic2NvcmUiLCJkaXNwbGF5TWlzcyIsInBvaW50cyIsInNob3RzSGl0Iiwic2hvdHNNaXNzIiwic2hpcHNTdW5rIiwidGltZSIsInRvdGFsIiwibWluIiwiZmlyc3RDaGlsZCIsImRhdGEiLCJzZWMiLCJwYXJzZUZsb2F0IiwiZm9yRWFjaCIsImVsIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQU1BLEtBQUssR0FBRztBQUVaQyxFQUFBQSxNQUFNLEVBQUVDLFFBQVEsQ0FBQ0MsZ0JBQVQsQ0FBMEIsV0FBMUIsQ0FGSTtBQUlaQyxFQUFBQSxLQUFLLEVBQUUsQ0FBQztBQUNOQyxJQUFBQSxFQUFFLEVBQUUsU0FERTtBQUVOQyxJQUFBQSxNQUFNLEVBQUUsQ0FGRjtBQUdOQyxJQUFBQSxNQUFNLEVBQUUsQ0FIRjtBQUlOQyxJQUFBQSxHQUFHLEVBQUU7QUFKQyxHQUFELEVBS0o7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QXRCLENBQUgsRUFBZ0M7QUFDOUJhLFVBQUFBLE1BQU0sQ0FBQ0MsUUFBUDtBQUNELFNBRkQsTUFFTSxJQUFHVyxFQUFFLENBQUMxQixTQUFILENBQWFDLFFBQWIsQ0FBc0IsTUFBdEIsQ0FBSCxFQUFpQztBQUNyQ2EsVUFBQUEsTUFBTSxDQUFDRSxTQUFQO0FBQ0Q7QUFDRixPQU5EO0FBT0FsRCxNQUFBQSxLQUFLLENBQUNJLEtBQU4sQ0FBWXVELE9BQVosQ0FBb0IsVUFBQTFCLEtBQUssRUFBRztBQUMxQixZQUFHQSxLQUFLLENBQUN6QixHQUFOLEtBQWMsQ0FBakIsRUFBbUI7QUFDakJ3QyxVQUFBQSxNQUFNLENBQUNHLFNBQVA7QUFDRDtBQUNGLE9BSkQ7QUFLQUgsTUFBQUEsTUFBTSxDQUFDSyxLQUFQLEdBQWdCTCxNQUFNLENBQUNJLElBQVAsR0FBZUosTUFBTSxDQUFDQyxRQUFQLEdBQWtCLEVBQWpDLEdBQXVDRCxNQUFNLENBQUNHLFNBQVAsR0FBa0IsRUFBekQsR0FBK0RILE1BQU0sQ0FBQ0UsU0FBUCxHQUFtQixFQUFsRztBQUNBLGFBQU9GLE1BQVA7QUFDRDs7QUFDRCxXQUFPO0FBQ0xGLE1BQUFBLEtBQUssRUFBQ0E7QUFERCxLQUFQO0FBR0QsR0FwQ1U7QUFwRkMsQ0FBZCIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vZGVsID0ge1xyXG5cclxuICBzcXVhcmU6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5ncmlkIGRpdicpLFxyXG4gIFxyXG4gIHNoaXBzOiBbe1xyXG4gICAgaWQ6IFwiTWFub1dhclwiLFxyXG4gICAgY29yZHNZOiAwLFxyXG4gICAgY29yZHNYOiAwLFxyXG4gICAgcmVzOiAzLFxyXG4gIH0sIHtcclxuICAgIGlkOiBcIkRlc3Ryb3llclwiLFxyXG4gICAgY29yZHNZOiAwLFxyXG4gICAgY29yZHNYOiAwLFxyXG4gICAgcmVzOiAyLFxyXG4gIH0sIHtcclxuICAgIGlkOiBcIlNpbGVuY2VcIixcclxuICAgIGNvcmRzWTogMCxcclxuICAgIGNvcmRzWDogMCxcclxuICAgIHJlczogMixcclxuICB9XSxcclxuICBpbml0IDogZmFsc2UsXHJcbiAgXHJcbiAgZmlyZTogZnVuY3Rpb24gKGd1ZXNzLCBmaWVsZCkge1xyXG4gICAgc2hvdCgpO1xyXG4gICAgXHJcbiAgICBmdW5jdGlvbiBzaG90KCkge1xyXG4gICAgICBsZXQgc2l6ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyYWRhci1ncmlkJykuZmlyc3RFbGVtZW50Q2hpbGQub2Zmc2V0V2lkdGggLzIuNTtcclxuICAgICAgbGV0IGdyaWQgPSByYWRhci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGd1ZXNzKVswXTtcclxuICAgICAgbGV0IGdyaWRZID0gZ3JpZC5vZmZzZXRUb3AgKyBncmlkLm9mZnNldEhlaWdodCAvIDI7XHJcbiAgICAgIGxldCBncmlkWCA9IGdyaWQub2Zmc2V0TGVmdCArIGdyaWQub2Zmc2V0V2lkdGggLyAyO1xyXG4gICAgICBcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtb2RlbC5zaGlwcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIG1vZGVsLnNoaXBzW2ldLmNvcmRzWSA9IHZpZXcubmF2aW9zW2ldLm9mZnNldFRvcCArIHZpZXcubmF2aW9zW2ldLm9mZnNldEhlaWdodCAvIDI7XHJcbiAgICAgICAgbW9kZWwuc2hpcHNbaV0uY29yZHNYID0gdmlldy5uYXZpb3NbaV0ub2Zmc2V0TGVmdCArIHZpZXcubmF2aW9zW2ldLm9mZnNldFdpZHRoIC8gMjtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoKG1vZGVsLnNoaXBzW2ldLmNvcmRzWSAtIHNpemUpIDwgZ3JpZFkgJiYgZ3JpZFkgPCBtb2RlbC5zaGlwc1tpXS5jb3Jkc1kgKyBzaXplICYmIChtb2RlbC5zaGlwc1tpXS5jb3Jkc1ggLSBzaXplKSA8IGdyaWRYICYmIGdyaWRYIDwgKG1vZGVsLnNoaXBzW2ldLmNvcmRzWCArIHNpemUpKSB7XHJcbiAgICAgICAgICBoaXQobW9kZWwuc2hpcHNbaV0sIHZpZXcubmF2aW9zW2ldKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgbWlzcygpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBmdW5jdGlvbiBoaXQoc2hpcCwgbmF2aW8pIHtcclxuICAgICAgXHJcbiAgICAgIGlmICghZmllbGQuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaXQnKSAmJiAhZmllbGQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtaXNzJykpIHtcclxuICAgICAgICBzaGlwLnJlcy0tO1xyXG4gICAgICAgIGlmIChzaGlwLnJlcyA9PT0gMCkge1xyXG4gICAgICAgICAgc2hpcC5zYW5rID0gdHJ1ZTtcclxuICAgICAgICAgIHZpZXcuZGFtYWdlKG5hdmlvLCAnc3VuaycpO1xyXG4gICAgICAgICAgdmlldy5kaXNwbGF5TWVzc2FnZSgnWW91IHNhbmsgdGhlIGJhdHRsZXNoaXAgJyArIHNoaXAuaWQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB2aWV3LmRhbWFnZShuYXZpbywgJ2hpdCcpO1xyXG4gICAgICAgICAgdmlldy5kaXNwbGF5TWVzc2FnZSgnIFRoZSAnICtzaGlwLmlkKycgaGFzIGJlZW4gaGl0ICEgICcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2aWV3LmRpc3BsYXlIaXQoZ3Vlc3MpO1xyXG4gICAgICAgIGlmIChtb2RlbC5pc1N1bmsoKSkge1xyXG4gICAgICAgICAgdmlldy5kaXNwbGF5TWVzc2FnZSgnIENvbmdyYXR1bGF0aW9ucyEgWW91IHNhbmsgYWxsIGJhdHRsZXNoaXBzICcpO1xyXG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZpZXcuZGlzcGxheUVuZE1lc3NhZ2UoJ01pc3Npb24gQ29tcGxldGUnKTtcclxuICAgICAgICAgICAgdmlldy5maW5pc2goKTtcclxuICAgICAgICAgICAgdmlldy5lbmQobW9kZWwuZ2V0U2NvcmUuc2NvcmUoKSk7XHJcbiAgICAgICAgICB9LCAzMDAwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgZnVuY3Rpb24gbWlzcygpIHsgICAgIFxyXG4gICAgICBpZiAoIWZpZWxkLmNsYXNzTGlzdC5jb250YWlucygnbWlzcycpICYmICFmaWVsZC5jbGFzc0xpc3QuY29udGFpbnMoJ2hpdCcpKSB7XHJcbiAgICAgICAgdmlldy5kaXNwbGF5TWlzcyhndWVzcyk7XHJcbiAgICAgICAgdmlldy5kaXNwbGF5TWVzc2FnZSgnWW91IG1pc3NlZC4nKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gIH0sXHJcblxyXG4gIGlzU3VuazogZnVuY3Rpb24gKCkge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtb2RlbC5zaGlwcy5sZW5ndGg7IGkrKylcclxuICAgICAgaWYgKCFtb2RlbC5zaGlwc1tpXS5zYW5rKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9LFxyXG4gIGdldFNjb3JlIDogKGZ1bmN0aW9uKCl7XHJcbiAgICBmdW5jdGlvbiBzY29yZSgpe1xyXG4gICAgICBjb25zdCBwb2ludHMgPSB7XHJcbiAgICAgICAgc2hvdHNIaXQgOiAwLFxyXG4gICAgICAgIHNob3RzTWlzcyA6IDAsXHJcbiAgICAgICAgc2hpcHNTdW5rIDogMCxcclxuICAgICAgICB0aW1lIDogMCxcclxuICAgICAgICB0b3RhbDowLFxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZighbW9kZWwuaW5pdCl7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBsZXQgbWluID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21pbicpLmZpcnN0Q2hpbGQuZGF0YSBcclxuICAgICAgbGV0IHNlYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWMnKS5maXJzdENoaWxkLmRhdGFcclxuICAgICAgcG9pbnRzLnRpbWUgPSAocGFyc2VGbG9hdChtaW4pICo2MCArIHBhcnNlRmxvYXQoc2VjKSkgO1xyXG5cclxuICAgICAgbW9kZWwuc3F1YXJlLmZvckVhY2goZWwgPT4ge1xyXG4gICAgICAgIGlmKGVsLmNsYXNzTGlzdC5jb250YWlucygnaGl0Jykpe1xyXG4gICAgICAgICAgcG9pbnRzLnNob3RzSGl0KysgO1xyXG4gICAgICAgIH1lbHNlIGlmKGVsLmNsYXNzTGlzdC5jb250YWlucygnbWlzcycpKXtcclxuICAgICAgICAgIHBvaW50cy5zaG90c01pc3MrKyA7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgbW9kZWwuc2hpcHMuZm9yRWFjaChuYXZpbyA9PntcclxuICAgICAgICBpZihuYXZpby5yZXMgPT09IDApe1xyXG4gICAgICAgICAgcG9pbnRzLnNoaXBzU3VuaysrO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIHBvaW50cy50b3RhbCA9IChwb2ludHMudGltZSArIChwb2ludHMuc2hvdHNIaXQgKiAyNSkgKyhwb2ludHMuc2hpcHNTdW5rKiA3MCkgLSBwb2ludHMuc2hvdHNNaXNzICogMTApO1xyXG4gICAgICByZXR1cm4gcG9pbnRzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc2NvcmU6c2NvcmUsXHJcbiAgICB9XHJcbiAgfSkoKSxcclxufTtcclxuIl19
},{}]},{},[1])