(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.db = void 0;
var firebaseConfig = {
  apiKey: "AIzaSyAsOckeBlx0P8kg8XRr66XwkIT_T6VHJms",
  authDomain: "battleship-web-2cde3.firebaseapp.com",
  databaseURL: "https://battleship-web-2cde3.firebaseio.com",
  projectId: "battleship-web-2cde3",
  storageBucket: "battleship-web-2cde3.appspot.com",
  messagingSenderId: "22663135008",
  appId: "1:22663135008:web:f6fb7dd2cc5a7aee"
};
firebase.initializeApp(firebaseConfig);
var db = firebase.firestore();
exports.db = db;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRiLmpzIl0sIm5hbWVzIjpbImZpcmViYXNlQ29uZmlnIiwiYXBpS2V5IiwiYXV0aERvbWFpbiIsImRhdGFiYXNlVVJMIiwicHJvamVjdElkIiwic3RvcmFnZUJ1Y2tldCIsIm1lc3NhZ2luZ1NlbmRlcklkIiwiYXBwSWQiLCJmaXJlYmFzZSIsImluaXRpYWxpemVBcHAiLCJkYiIsImZpcmVzdG9yZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ0EsSUFBSUEsY0FBYyxHQUFHO0FBQ25CQyxFQUFBQSxNQUFNLEVBQUUseUNBRFc7QUFFbkJDLEVBQUFBLFVBQVUsRUFBRSxzQ0FGTztBQUduQkMsRUFBQUEsV0FBVyxFQUFFLDZDQUhNO0FBSW5CQyxFQUFBQSxTQUFTLEVBQUUsc0JBSlE7QUFLbkJDLEVBQUFBLGFBQWEsRUFBRSxrQ0FMSTtBQU1uQkMsRUFBQUEsaUJBQWlCLEVBQUUsYUFOQTtBQU9uQkMsRUFBQUEsS0FBSyxFQUFFO0FBUFksQ0FBckI7QUFTQUMsUUFBUSxDQUFDQyxhQUFULENBQXVCVCxjQUF2QjtBQUVPLElBQU1VLEVBQUUsR0FBR0YsUUFBUSxDQUFDRyxTQUFULEVBQVgiLCJzb3VyY2VzQ29udGVudCI6WyJcclxudmFyIGZpcmViYXNlQ29uZmlnID0ge1xyXG4gIGFwaUtleTogXCJBSXphU3lBc09ja2VCbHgwUDhrZzhYUnI2Nlh3a0lUX1Q2VkhKbXNcIixcclxuICBhdXRoRG9tYWluOiBcImJhdHRsZXNoaXAtd2ViLTJjZGUzLmZpcmViYXNlYXBwLmNvbVwiLFxyXG4gIGRhdGFiYXNlVVJMOiBcImh0dHBzOi8vYmF0dGxlc2hpcC13ZWItMmNkZTMuZmlyZWJhc2Vpby5jb21cIixcclxuICBwcm9qZWN0SWQ6IFwiYmF0dGxlc2hpcC13ZWItMmNkZTNcIixcclxuICBzdG9yYWdlQnVja2V0OiBcImJhdHRsZXNoaXAtd2ViLTJjZGUzLmFwcHNwb3QuY29tXCIsXHJcbiAgbWVzc2FnaW5nU2VuZGVySWQ6IFwiMjI2NjMxMzUwMDhcIixcclxuICBhcHBJZDogXCIxOjIyNjYzMTM1MDA4OndlYjpmNmZiN2RkMmNjNWE3YWVlXCJcclxufTtcclxuZmlyZWJhc2UuaW5pdGlhbGl6ZUFwcChmaXJlYmFzZUNvbmZpZyk7XHJcblxyXG5leHBvcnQgY29uc3QgZGIgPSBmaXJlYmFzZS5maXJlc3RvcmUoKTsiXX0=
},{}],2:[function(require,module,exports){
"use strict";

var _db = require("./db");

var view = {
  navios: document.querySelectorAll('.ships'),
  message: document.getElementById('messageArea'),
  messageEnd: document.getElementById('messageEnd'),
  antena: document.querySelector('.antena'),
  mapa: document.getElementById('radar'),
  cronometro: document.getElementById('countDown'),
  interval: null,
  points: document.querySelectorAll('.point-list-item span'),
  overlay: document.getElementById('overlay'),
  modal: document.getElementById('modal'),
  list: document.getElementsByClassName('point-list-item'),
  rankWrap: document.getElementById('rank-wrap'),
  rankList: document.getElementById('rank-list'),
  start: function start() {
    var _this = this;

    model.init = true;
    this.mapa.classList.add('radar-map');
    controller.btnStart.classList.add('is-active');
    controller.btnStart.disabled = true;
    controller.btnRank.disabled = true;
    controller.input.disabled = false;
    controller.input.focus();
    this.countDown();
    setTimeout(function () {
      _this.antena.classList.remove('hidden');

      controller.btnStop.disabled = false;
    }, 5000);
  },
  stop: function stop() {
    window.location.reload();
  },
  finish: function finish() {
    clearInterval(view.interval);
    view.mapa.querySelector('.antena').style.animationPlayState = 'paused';
    view.cronometro.style.animationPlayState = 'paused';
    controller.btnStart.classList.remove('is-active');
    controller.input.disabled = true;
    controller.btnStop.disabled = true;
    view.navios.forEach(function (el) {
      el.style.animationPlayState = 'paused';
    });
    view.cronometro.classList.remove('is--time-over');
    view.end(model.getScore.score());
  },
  generateShips: function generateShips() {
    var key = random(2);
    view.navios[key[0]].style.animationDirection = 'alternate-reverse';
    var i = 0;
    var place = setInterval(function () {
      view.navios[key[i]].classList.remove('hidden');
      i++;

      if (i === view.navios.length) {
        clearInterval(place);
      }
    }, 7000);

    function random(max) {
      var myList = [];

      for (var i = 0; i <= max; i++) {
        myList.push(i);
      }

      myList.sort(function (a, b) {
        return Math.round(Math.random() * 2) - 1;
      });
      var myNums = myList.splice(0, max + 1);
      return myNums;
    }
  },
  displayMessage: function displayMessage(msg) {
    this.message.textContent = msg;
  },
  displayHit: function displayHit(location) {
    document.getElementById(location).classList.add('hit');
  },
  displayMiss: function displayMiss(location) {
    document.getElementById(location).classList.add('miss');
  },
  displayEndMessage: function displayEndMessage(msg) {
    this.messageEnd.textContent = msg;
  },
  damage: function damage(navio, status) {
    if (status === 'hit') {
      navio.classList.add('hitted');
      setTimeout(function () {
        navio.classList.remove('hitted');
      }, 3000);
    }

    if (status === 'sunk') {
      navio.classList.add('sunk');
    }
  },
  countDown: function countDown() {
    var _this2 = this;

    time();
    setTimeout(function () {
      _this2.cronometro.style.visibility = 'visible';
    }, 60000);
    setTimeout(function () {
      _this2.cronometro.classList.add('is--time-over');
    }, 120000);

    function time() {
      var s = 30;
      var m = 2;
      view.interval = setInterval(function () {
        if (s == 0) {
          m--;
          s = 60;
        }

        if (m < 10) document.getElementById("min").textContent = "0" + m;else document.getElementById("min").textContent = m;
        s--;
        if (s < 10) document.getElementById("sec").textContent = "0" + s;else document.getElementById("sec").textContent = s;

        if (m == 0 && s == 0) {
          view.finish();
          view.displayEndMessage('Mission is Over');
        }
      }, 1000);
    }

    ;
  },
  end: function end(score) {
    view.overlay.classList.add('display');
    view.points.forEach(function (el) {
      for (var prop in score) {
        if (el.getAttribute('id') == prop) {
          el.textContent = score[prop];
        }
      }
    });
    setTimeout(function () {
      view.modal.classList.add('display');
    }, 2000);
    setTimeout(function () {
      var i = 0;
      var scores = setInterval(function () {
        view.list[i].classList.add('display');
        i++;

        if (i === view.list.length) {
          clearInterval(scores);
        }
      }, 2000);
    }, 3000);
    setTimeout(function () {
      controller.btnStop.disabled = false;
      controller.btnStop.style.zIndex = '9';
      controller.btnRank.disabled = false;
      controller.addRank();
    }, 16000);
  },
  rank: function rank() {
    if (view.modal.classList.contains('display')) {
      view.rankWrap.classList.toggle('show-rank');
    } else {
      view.overlay.classList.toggle('display');
      view.rankWrap.classList.toggle('show-rank');
    }
  },
  renderRank: function renderRank() {
    view.rankList.innerHTML = '';

    _db.db.collection('rank').orderBy('score', 'desc').get().then(function (snapshot) {
      snapshot.docs.forEach(function (doc) {
        var li = document.createElement('li');
        var name = document.createElement('strong');
        var score = document.createElement('span');
        li.setAttribute('data-id', doc.id);
        name.textContent = doc.data().name;
        score.textContent = doc.data().score;
        name.appendChild(score);
        li.appendChild(name);
        view.rankList.appendChild(li);
      });
    });
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZha2VfZDc3MThkMTUuanMiXSwibmFtZXMiOlsidmlldyIsIm5hdmlvcyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsIm1lc3NhZ2UiLCJnZXRFbGVtZW50QnlJZCIsIm1lc3NhZ2VFbmQiLCJhbnRlbmEiLCJxdWVyeVNlbGVjdG9yIiwibWFwYSIsImNyb25vbWV0cm8iLCJpbnRlcnZhbCIsInBvaW50cyIsIm92ZXJsYXkiLCJtb2RhbCIsImxpc3QiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwicmFua1dyYXAiLCJyYW5rTGlzdCIsInN0YXJ0IiwibW9kZWwiLCJpbml0IiwiY2xhc3NMaXN0IiwiYWRkIiwiY29udHJvbGxlciIsImJ0blN0YXJ0IiwiZGlzYWJsZWQiLCJidG5SYW5rIiwiaW5wdXQiLCJmb2N1cyIsImNvdW50RG93biIsInNldFRpbWVvdXQiLCJyZW1vdmUiLCJidG5TdG9wIiwic3RvcCIsIndpbmRvdyIsImxvY2F0aW9uIiwicmVsb2FkIiwiZmluaXNoIiwiY2xlYXJJbnRlcnZhbCIsInN0eWxlIiwiYW5pbWF0aW9uUGxheVN0YXRlIiwiZm9yRWFjaCIsImVsIiwiZW5kIiwiZ2V0U2NvcmUiLCJzY29yZSIsImdlbmVyYXRlU2hpcHMiLCJrZXkiLCJyYW5kb20iLCJhbmltYXRpb25EaXJlY3Rpb24iLCJpIiwicGxhY2UiLCJzZXRJbnRlcnZhbCIsImxlbmd0aCIsIm1heCIsIm15TGlzdCIsInB1c2giLCJzb3J0IiwiYSIsImIiLCJNYXRoIiwicm91bmQiLCJteU51bXMiLCJzcGxpY2UiLCJkaXNwbGF5TWVzc2FnZSIsIm1zZyIsInRleHRDb250ZW50IiwiZGlzcGxheUhpdCIsImRpc3BsYXlNaXNzIiwiZGlzcGxheUVuZE1lc3NhZ2UiLCJkYW1hZ2UiLCJuYXZpbyIsInN0YXR1cyIsInRpbWUiLCJ2aXNpYmlsaXR5IiwicyIsIm0iLCJwcm9wIiwiZ2V0QXR0cmlidXRlIiwic2NvcmVzIiwiekluZGV4IiwiYWRkUmFuayIsInJhbmsiLCJjb250YWlucyIsInRvZ2dsZSIsInJlbmRlclJhbmsiLCJpbm5lckhUTUwiLCJkYiIsImNvbGxlY3Rpb24iLCJvcmRlckJ5IiwiZ2V0IiwidGhlbiIsInNuYXBzaG90IiwiZG9jcyIsImRvYyIsImxpIiwiY3JlYXRlRWxlbWVudCIsIm5hbWUiLCJzZXRBdHRyaWJ1dGUiLCJpZCIsImRhdGEiLCJhcHBlbmRDaGlsZCJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7QUFFQSxJQUFNQSxJQUFJLEdBQUc7QUFDWEMsRUFBQUEsTUFBTSxFQUFFQyxRQUFRLENBQUNDLGdCQUFULENBQTBCLFFBQTFCLENBREc7QUFFWEMsRUFBQUEsT0FBTyxFQUFFRixRQUFRLENBQUNHLGNBQVQsQ0FBd0IsYUFBeEIsQ0FGRTtBQUdYQyxFQUFBQSxVQUFVLEVBQUVKLFFBQVEsQ0FBQ0csY0FBVCxDQUF3QixZQUF4QixDQUhEO0FBSVhFLEVBQUFBLE1BQU0sRUFBRUwsUUFBUSxDQUFDTSxhQUFULENBQXVCLFNBQXZCLENBSkc7QUFLWEMsRUFBQUEsSUFBSSxFQUFFUCxRQUFRLENBQUNHLGNBQVQsQ0FBd0IsT0FBeEIsQ0FMSztBQU1YSyxFQUFBQSxVQUFVLEVBQUVSLFFBQVEsQ0FBQ0csY0FBVCxDQUF3QixXQUF4QixDQU5EO0FBT1hNLEVBQUFBLFFBQVEsRUFBRSxJQVBDO0FBUVhDLEVBQUFBLE1BQU0sRUFBRVYsUUFBUSxDQUFDQyxnQkFBVCxDQUEwQix1QkFBMUIsQ0FSRztBQVNYVSxFQUFBQSxPQUFPLEVBQUVYLFFBQVEsQ0FBQ0csY0FBVCxDQUF3QixTQUF4QixDQVRFO0FBVVhTLEVBQUFBLEtBQUssRUFBRVosUUFBUSxDQUFDRyxjQUFULENBQXdCLE9BQXhCLENBVkk7QUFXWFUsRUFBQUEsSUFBSSxFQUFFYixRQUFRLENBQUNjLHNCQUFULENBQWdDLGlCQUFoQyxDQVhLO0FBWVhDLEVBQUFBLFFBQVEsRUFBRWYsUUFBUSxDQUFDRyxjQUFULENBQXdCLFdBQXhCLENBWkM7QUFhWGEsRUFBQUEsUUFBUSxFQUFFaEIsUUFB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QUFDa0IsUUFBTCxDQUFjb0YsV0FBZCxDQUEwQk4sRUFBMUI7QUFDRCxPQWJEO0FBY0QsS0FmRDtBQWdCRDtBQXZMVSxDQUFiIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGIgfSBmcm9tICcuL2RiJztcclxuXHJcbmNvbnN0IHZpZXcgPSB7XHJcbiAgbmF2aW9zIDpkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2hpcHMnKSxcclxuICBtZXNzYWdlOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVzc2FnZUFyZWEnKSxcclxuICBtZXNzYWdlRW5kOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVzc2FnZUVuZCcpLFxyXG4gIGFudGVuYTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFudGVuYScpLFxyXG4gIG1hcGE6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyYWRhcicpLFxyXG4gIGNyb25vbWV0cm86IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb3VudERvd24nKSxcclxuICBpbnRlcnZhbDogbnVsbCxcclxuICBwb2ludHM6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb2ludC1saXN0LWl0ZW0gc3BhbicpLFxyXG4gIG92ZXJsYXk6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvdmVybGF5JyksXHJcbiAgbW9kYWw6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbCcpLFxyXG4gIGxpc3Q6IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3BvaW50LWxpc3QtaXRlbScpLFxyXG4gIHJhbmtXcmFwOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmFuay13cmFwJyksXHJcbiAgcmFua0xpc3Q6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyYW5rLWxpc3QnKSxcclxuICBzdGFydDogZnVuY3Rpb24gKCkge1xyXG4gICAgbW9kZWwuaW5pdCA9dHJ1ZTtcclxuICAgIHRoaXMubWFwYS5jbGFzc0xpc3QuYWRkKCdyYWRhci1tYXAnKTtcclxuICAgIGNvbnRyb2xsZXIuYnRuU3RhcnQuY2xhc3NMaXN0LmFkZCgnaXMtYWN0aXZlJyk7XHJcbiAgICBjb250cm9sbGVyLmJ0blN0YXJ0LmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIGNvbnRyb2xsZXIuYnRuUmFuay5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICBjb250cm9sbGVyLmlucHV0LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICBjb250cm9sbGVyLmlucHV0LmZvY3VzKCk7XHJcbiAgICB0aGlzLmNvdW50RG93bigpO1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHRoaXMuYW50ZW5hLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXHJcbiAgICAgIGNvbnRyb2xsZXIuYnRuU3RvcC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfSwgNTAwMCk7XHJcbiAgfSxcclxuICBzdG9wOiBmdW5jdGlvbiAoKSB7XHJcbiAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgfSxcclxuICBmaW5pc2g6ICgpID0+IHtcclxuICAgIGNsZWFySW50ZXJ2YWwodmlldy5pbnRlcnZhbCk7XHJcbiAgICB2aWV3Lm1hcGEucXVlcnlTZWxlY3RvcignLmFudGVuYScpLnN0eWxlLmFuaW1hdGlvblBsYXlTdGF0ZSA9ICdwYXVzZWQnO1xyXG4gICAgdmlldy5jcm9ub21ldHJvLnN0eWxlLmFuaW1hdGlvblBsYXlTdGF0ZSA9ICdwYXVzZWQnO1xyXG4gICAgY29udHJvbGxlci5idG5TdGFydC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1hY3RpdmUnKTtcclxuICAgIGNvbnRyb2xsZXIuaW5wdXQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgY29udHJvbGxlci5idG5TdG9wLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIHZpZXcubmF2aW9zLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgIGVsLnN0eWxlLmFuaW1hdGlvblBsYXlTdGF0ZSA9ICdwYXVzZWQnO1xyXG4gICAgfSk7XHJcbiAgICB2aWV3LmNyb25vbWV0cm8uY2xhc3NMaXN0LnJlbW92ZSgnaXMtLXRpbWUtb3ZlcicpO1xyXG4gICAgdmlldy5lbmQobW9kZWwuZ2V0U2NvcmUuc2NvcmUoKSk7XHJcbiAgfSxcclxuICBnZW5lcmF0ZVNoaXBzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICBsZXQga2V5ID0gcmFuZG9tKDIpO1xyXG4gICAgdmlldy5uYXZpb3Nba2V5WzBdXS5zdHlsZS5hbmltYXRpb25EaXJlY3Rpb24gPSAnYWx0ZXJuYXRlLXJldmVyc2UnO1xyXG4gICAgbGV0IGkgPSAwO1xyXG4gICAgbGV0IHBsYWNlID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICB2aWV3Lm5hdmlvc1trZXlbaV1dLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG4gICAgICBpKys7XHJcbiAgICAgIGlmIChpID09PSB2aWV3Lm5hdmlvcy5sZW5ndGgpIHtcclxuICAgICAgICBjbGVhckludGVydmFsKHBsYWNlKTtcclxuICAgICAgfVxyXG4gICAgfSwgNzAwMCk7XHJcblxyXG4gICAgZnVuY3Rpb24gcmFuZG9tKG1heCkge1xyXG4gICAgICB2YXIgbXlMaXN0ID0gW107XHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IG1heDsgaSsrKSB7XHJcbiAgICAgICAgbXlMaXN0LnB1c2goaSk7XHJcbiAgICAgIH1cclxuICAgICAgbXlMaXN0LnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMikgLSAxO1xyXG4gICAgICB9KTtcclxuICAgICAgdmFyIG15TnVtcyA9IG15TGlzdC5zcGxpY2UoMCwgbWF4ICsgMSk7XHJcbiAgICAgIHJldHVybiBteU51bXM7XHJcbiAgICB9XHJcbiAgfSxcclxuXHJcbiAgZGlzcGxheU1lc3NhZ2U6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgIHRoaXMubWVzc2FnZS50ZXh0Q29udGVudCA9IG1zZztcclxuICB9LFxyXG5cclxuICBkaXNwbGF5SGl0OiBmdW5jdGlvbiAobG9jYXRpb24pIHtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxvY2F0aW9uKS5jbGFzc0xpc3QuYWRkKCdoaXQnKTtcclxuICB9LFxyXG5cclxuICBkaXNwbGF5TWlzczogZnVuY3Rpb24gKGxvY2F0aW9uKSB7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChsb2NhdGlvbikuY2xhc3NMaXN0LmFkZCgnbWlzcycpO1xyXG4gIH0sXHJcbiAgZGlzcGxheUVuZE1lc3NhZ2U6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgIHRoaXMubWVzc2FnZUVuZC50ZXh0Q29udGVudCA9IG1zZztcclxuICB9LFxyXG4gIGRhbWFnZTogZnVuY3Rpb24gKG5hdmlvLCBzdGF0dXMpIHtcclxuICAgIGlmIChzdGF0dXMgPT09ICdoaXQnKSB7XHJcbiAgICAgIG5hdmlvLmNsYXNzTGlzdC5hZGQoJ2hpdHRlZCcpO1xyXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBuYXZpby5jbGFzc0xpc3QucmVtb3ZlKCdoaXR0ZWQnKTtcclxuICAgICAgfSwgMzAwMCk7XHJcbiAgICB9XHJcbiAgICBpZiAoc3RhdHVzID09PSAnc3VuaycpIHtcclxuICAgICAgbmF2aW8uY2xhc3NMaXN0LmFkZCgnc3VuaycpO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgY291bnREb3duOiBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aW1lKCk7XHJcblxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHRoaXMuY3Jvbm9tZXRyby5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xyXG4gICAgfSwgNjAwMDApO1xyXG5cclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICB0aGlzLmNyb25vbWV0cm8uY2xhc3NMaXN0LmFkZCgnaXMtLXRpbWUtb3ZlcicpXHJcbiAgICB9LCAxMjAwMDApO1xyXG5cclxuICAgIGZ1bmN0aW9uIHRpbWUoKSB7XHJcbiAgICAgIGxldCBzID0gMzA7XHJcbiAgICAgIGxldCBtID0gMjtcclxuXHJcbiAgICAgIHZpZXcuaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgICAgaWYgKHMgPT0gMCkge1xyXG4gICAgICAgICAgbS0tO1xyXG4gICAgICAgICAgcyA9IDYwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobSA8IDEwKSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1pblwiKS50ZXh0Q29udGVudCA9IFwiMFwiICsgbTtcclxuICAgICAgICBlbHNlIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWluXCIpLnRleHRDb250ZW50ID0gbTtcclxuICAgICAgICBzLS07XHJcbiAgICAgICAgaWYgKHMgPCAxMCkgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZWNcIikudGV4dENvbnRlbnQgPSBcIjBcIiArIHM7XHJcbiAgICAgICAgZWxzZSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNlY1wiKS50ZXh0Q29udGVudCA9IHM7XHJcblxyXG4gICAgICAgIGlmIChtID09IDAgJiYgcyA9PSAwKSB7XHJcbiAgICAgICAgICB2aWV3LmZpbmlzaCgpO1xyXG4gICAgICAgICAgdmlldy5kaXNwbGF5RW5kTWVzc2FnZSgnTWlzc2lvbiBpcyBPdmVyJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LCAxMDAwKTtcclxuICAgIH07XHJcbiAgfSxcclxuICBlbmQ6IGZ1bmN0aW9uIChzY29yZSkge1xyXG4gICAgdmlldy5vdmVybGF5LmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXknKTtcclxuICAgIHZpZXcucG9pbnRzLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgIGZvciAobGV0IHByb3AgaW4gc2NvcmUpIHtcclxuICAgICAgICBpZiAoZWwuZ2V0QXR0cmlidXRlKCdpZCcpID09IHByb3ApIHtcclxuICAgICAgICAgIGVsLnRleHRDb250ZW50ID0gc2NvcmVbcHJvcF07XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHZpZXcubW9kYWwuY2xhc3NMaXN0LmFkZCgnZGlzcGxheScpO1xyXG4gICAgfSwgMjAwMCk7XHJcblxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIGxldCBpID0gMDtcclxuICAgICAgbGV0IHNjb3JlcyA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgICB2aWV3Lmxpc3RbaV0uY2xhc3NMaXN0LmFkZCgnZGlzcGxheScpO1xyXG4gICAgICAgIGkrKztcclxuICAgICAgICBpZiAoaSA9PT0gdmlldy5saXN0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgY2xlYXJJbnRlcnZhbChzY29yZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSwgMjAwMCk7XHJcbiAgICB9LCAzMDAwKTtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICBjb250cm9sbGVyLmJ0blN0b3AuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgY29udHJvbGxlci5idG5TdG9wLnN0eWxlLnpJbmRleCA9ICc5JztcclxuICAgICAgY29udHJvbGxlci5idG5SYW5rLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgIGNvbnRyb2xsZXIuYWRkUmFuaygpO1xyXG4gICAgfSwgMTYwMDApO1xyXG4gIH0sXHJcbiAgcmFuazogZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKHZpZXcubW9kYWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdkaXNwbGF5JykpIHtcclxuICAgICAgdmlldy5yYW5rV3JhcC5jbGFzc0xpc3QudG9nZ2xlKCdzaG93LXJhbmsnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHZpZXcub3ZlcmxheS5jbGFzc0xpc3QudG9nZ2xlKCdkaXNwbGF5Jyk7XHJcbiAgICAgIHZpZXcucmFua1dyYXAuY2xhc3NMaXN0LnRvZ2dsZSgnc2hvdy1yYW5rJyk7XHJcbiAgICB9XHJcbiAgfSxcclxuICByZW5kZXJSYW5rOiBmdW5jdGlvbiAoKSB7XHJcbiAgICB2aWV3LnJhbmtMaXN0LmlubmVySFRNTCA9ICcnO1xyXG4gICAgZGIuY29sbGVjdGlvbigncmFuaycpLm9yZGVyQnkoJ3Njb3JlJywnZGVzYycpLmdldCgpLnRoZW4oc25hcHNob3QgPT57XHJcbiAgICAgIHNuYXBzaG90LmRvY3MuZm9yRWFjaChkb2MgPT4ge1xyXG4gICAgICAgIGxldCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcbiAgICAgICAgbGV0IG5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHJvbmcnKTtcclxuICAgICAgICBsZXQgc2NvcmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGkuc2V0QXR0cmlidXRlKCdkYXRhLWlkJywgZG9jLmlkKTtcclxuICAgICAgICBuYW1lLnRleHRDb250ZW50ID0gZG9jLmRhdGEoKS5uYW1lO1xyXG4gICAgICAgIHNjb3JlLnRleHRDb250ZW50ID0gZG9jLmRhdGEoKS5zY29yZTtcclxuICAgICAgICBcclxuICAgICAgICBuYW1lLmFwcGVuZENoaWxkKHNjb3JlKTtcclxuICAgICAgICBsaS5hcHBlbmRDaGlsZChuYW1lKTtcclxuICAgICAgICBcclxuICAgICAgICB2aWV3LnJhbmtMaXN0LmFwcGVuZENoaWxkKGxpKTsgXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfSxcclxufTsiXX0=
},{"./db":1}]},{},[2])